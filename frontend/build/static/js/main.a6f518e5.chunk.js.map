{"version":3,"sources":["logo.svg","i18n.ts","serviceWorker.ts","models/common.model.ts","common/Constants.ts","store/common.ts","utils/request.ts","models/query.model.ts","services/auth.service.ts","store/auth.ts","services/chart.service.ts","store/chart.ts","services/dashboard.service.ts","store/dashboard.ts","services/query.service.ts","store/query.ts","services/stats.service.ts","store/stats.ts","store/index.ts","components/header/TextStripMenu.tsx","components/header/Hamburger.tsx","components/header/Menu.tsx","utils/compose.ts","components/header/Header.tsx","utils/yup.ts","pages/dashboard/Dashboard.tsx","pages/login/Login.tsx","pages/dashboard/ConfirmModal.tsx","components/datepicker/DatePickerWrapper.tsx","components/input/InputWrapper.tsx","pages/dashboard/ItemModal.tsx","utils/util.ts","pages/dashboard/AddItemContainer.tsx","pages/dashboard/DatePickerContainer.tsx","pages/dashboard/ItemList.tsx","components/togglebutton/ToggleButton.tsx","pages/stats/Stats.tsx","models/chart.model.ts","components/dropdown/DropDownItems.tsx","components/dialog/Dialog.tsx","pages/query/QuerySumDialog.tsx","pages/query/QueryListDialog.tsx","pages/query/Query.tsx","components/checkbox/Checkbox.tsx","pages/chart/BarChart.tsx","pages/chart/BarChartModal.tsx","pages/chart/Charts.tsx","pages/chart/LineChart.tsx","pages/chart/LineChartModal.tsx","components/notification/Notification.tsx","pages/app/App.tsx","index.tsx"],"names":["module","exports","i18n","use","Backend","LanguageDetector","initReactI18next","init","backend","loadPath","load","fallbackLng","DEFAULT_LANGUAGE","interpolation","escapeValue","react","wait","detection","caches","Boolean","window","location","hostname","match","Collection","CategoryType","IncomeCategory","CostCategory","NotificationType","Colors","Token","IncomeCategories","IncomeCategoriesWithEmpty","CostCategories","CostCategoriesWithEmpty","Months","CategoryCheckboxes","LineColors","StartDate","Date","Methods","commonSlice","createSlice","name","initialState","notification","descriptionMapping","JSON","parse","localStorage","getItem","reducers","setNotification","state","action","payload","addDescriptionMapping","setItem","stringify","actions","reducer","showNotification","type","Info","text","dispatch","a","axiosInstance","axios","create","resource","method","POST","config","token","headers","Authorization","request","url","response","data","interceptors","error","store","Error","message","logout","Promise","reject","ListItemType","ToggleState","AuthService","credentials","authSlice","loading","id","setTokenAndId","setToken","createBrowserHistory","go","removeItem","ChartService","params","chartSlice","BALANCE","undefined","COST","INCOME","SALARY","STATE","GIFT","LOAN","OTHER","BANK","CAR","CLOTHES","DRINK","FOOD","GROCERY","HOUSE","INVESTMENT","LUXURY","OVERHEAD","PHARMACY","PHONE","TRAVEL","prevBalance","setChartData","result","key","PREV_BALANCE","mapDataPoints","hasOwnProperty","includes","Object","keys","filter","points","mappedDataPoints","map","item","date","year","Number","split","month","amount","sort","b","sumAmount","forEach","DashboardService","PUT","DELETE","dashboardSlice","items","balance","setDashboardData","QueryService","querySlice","queryData","queryList","setQueryData","setQueryList","mockItem","_id","group_id","category","Other","category_type","Cost","day","description","StatsService","statsSlice","setStatsData","rootReducer","combineReducers","auth","authReducer","chart","chartReducer","common","commonReducer","dashboard","dashboardReducer","query","queryReducer","stats","statsReducer","configureStore","TextStripMenu","className","onClick","Hamburger","openMenu","switchMenuState","t","useTranslation","useEffect","document","addEventListener","handleClickOutside","removeEventListener","menuPanelRef","useRef","hamburgerIconRef","event","current","contains","target","onMenuClick","Fragment","ref","classNames","cross","to","Menu","compose","functions","length","arg","reduce","Header","setState","props","this","src","logo","alt","Component","mapDispatchToProps","connect","withTranslation","Yup","mixed","required","string","email","ModalType","Login","onSubmit","login","initialValues","password","validateOnChange","validationSchema","object","shape","noValidate","htmlFor","label","placeholder","authResponse","console","log","ConfirmModal","shown","onCancel","onConfirm","Modal","show","onHide","Title","Body","Footer","Button","variant","DatePickerWrapper","onChange","minDate","maxDate","selected","locale","dropdownMode","todayButton","isClearable","dateFormatCalendar","popperPlacement","dateFormat","InputWrapper","form","field","setFieldValue","propsToPass","validateForm","value","errors","touched","style","color","ItemModal","hide","isCost","createItem","updateItem","deleteItem","setDescriptionMapping","registerLocale","hu","number","test","toString","trim","replace","useState","confirmModalShown","setConfirmModalShown","isValidForm","setValidForm","validatedForm","showConfirmModal","confirmDelete","onSubmitForm","Income","ADD","toISOString","validateOnMount","values","isValid","setFieldTouched","categories","UPDATE","itemType","component","onBlur","DropdownButton","title","i","Dropdown","Item","eventKey","onSelect","autocomplete","disabled","getMoneyString","Math","round","dayPagingAvailable","left","moment","isSame","right","monthPagingAvailable","d","getFullYear","getMonth","now","canvas","createElement","getTextWidth","font","context","getContext","measureText","width","getMaxTextWidth","stringArray","max","AddItemContainer","showItemModal","DatePickerContainer","isPagingAvailable","changeDateWith","onDateChange","ItemList","indexOf","toLowerCase","Empty","Dashboard","itemModalShown","modalType","currentItemId","getData","getDashboardData","setHours","setMinutes","setSeconds","setMilliseconds","handleDateChange","setDate","getDate","setPagingAvailable","newState","hideItemModal","currentItem","find","msg","Stats","getStatsData","changeMonthWith","setMonth","isThisMonth","total_income","total_cost","balance_in_month","daily_average","daily_average_without_house","expected_cost","expected_balance_in_month","expected_balance","visible","ChartKey","ToggleButton","active","leftText","rightText","emptyText","None","Right","Left","empty","getYearItems","onSelectYear","years","push","getMonths","onSelectMonth","selectedYear","Dialog","onClose","children","QuerySumDialog","QueryListDialog","Query","activeCollectionToggle","activeCategoryTypeToggle","activeExclusionToggle","selectedCategoryIndex","activeFullMatchToggle","minAmount","maxAmount","selectedMonthIndex","sumModalShown","listModalShown","getParams","collection","Balance","exclude_category","description_like","min_amount","max_amount","min","min_date","max_date","switchActiveCollectionToggle","getSum","switchActiveCategoryTypeToggle","switchActiveExclusionToggle","getMenuItems","array","onSelectCategory","index","onDescriptionChange","switchActiveFullMatchToggle","onMinAmountChange","onMaxAmountChange","onMinDateChange","isAfter","onMaxDateChange","isBefore","isInvalidInput","getQueryData","getList","getQueryList","hideSumModal","hideListModal","e","withRouter","Checkbox","isChecked","setChecked","preventDefault","nonVisualizibleData","BarChart","domNode","height","selection","node","resize","setSize","draw","svgSelection","select","_groups","remove","margin","top","bottom","isHorizontalLabels","isNaN","parseInt","offsetWidth","isLarge","innerWidth","barWidth","x","scaleBand","rangeRound","padding","y","scaleLinear","svg","append","attr","domain","abs","g","call","axisBottom","selectAll","nodes","getComputedTextLength","axisLeft","ticks","enter","transition","duration","ease","easeLinear","setTimeout","BarChartAnimationLength","labels","prev","next","r","connector","BarChartModal","numberOfBars","setLarge","handleResize","small","IntervalType","LineChart","legends","tooltipWidth","tooltipHeight","isSum","getComputedStyle","getElementsByClassName","xScale","minValue","maxValue","PrevBalance","yScale","mapX","mapY","shift","getColor","line","d3line","_","curve","curveMonotoneX","that","on","onMouseOver","onMouseOut","LineChartAnimationLength","path","attrTween","tweenDash","circle","tooltipText","classed","translateX","l","getTotalLength","interpolateString","LineChartModal","Charts","intervalType","Month","activeChartTypeToggle","Array","fill","sumChecked","isButtonDisabled","isBarChartShown","isLineChartShown","min_month","max_month","min_year","max_year","Year","category_types","getCategoryTypesParam","getCategoriesParam","slice","categoryTypes","checked","getNumberOfCheckedCategories","setSumChecked","getCheckboxes","onRadioButtonClick","switchChartType","getChartData","hideBarChartModal","hideLineChartModal","Full","row","clear","hideNotification","App","authenticated","exact","history","ReactDOM","render","StrictMode","fallback","I18nextProvider","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.a6f518e5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.7b710682.svg\";","import i18n from 'i18next';\r\nimport LanguageDetector from 'i18next-browser-languagedetector';\r\nimport Backend from 'i18next-xhr-backend';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport { DEFAULT_LANGUAGE } from './supported-languages.json';\r\n\r\nexport function extract(key: string, defaultValue: string) {\r\n  return defaultValue || key;\r\n}\r\n\r\ni18n\r\n  .use(Backend)\r\n  .use(LanguageDetector)\r\n  .use(initReactI18next)\r\n  .init({\r\n    backend: {\r\n      loadPath: 'cost/locales/{{lng}}/{{ns}}.json',\r\n    },\r\n    load: 'languageOnly',\r\n    fallbackLng: DEFAULT_LANGUAGE,\r\n    interpolation: {\r\n      escapeValue: false,\r\n    },\r\n    react: {\r\n      wait: true,\r\n    },\r\n    detection: {\r\n      caches: ['cookie', 'localStorage'],\r\n    },\r\n  });\r\n\r\nexport default i18n;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","export enum Collection {\r\n  Item = 'item',\r\n  Balance = 'balance',\r\n}\r\n\r\nexport enum CategoryType {\r\n  Cost = 'COST',\r\n  Income = 'INCOME',\r\n}\r\n\r\nexport enum IncomeCategory {\r\n  Gift = 'GIFT',\r\n  State = 'STATE',\r\n  Investment = 'INVESTMENT',\r\n  Salary = 'SALARY',\r\n  Loan = 'LOAN',\r\n  Other = 'OTHER',\r\n}\r\n\r\nexport enum CostCategory {\r\n  Gift = 'GIFT',\r\n  Car = 'CAR',\r\n  Bank = 'BANK',\r\n  Investment = 'INVESTMENT',\r\n  Grocery = 'GROCERY',\r\n  Pharmacy = 'PHARMACY',\r\n  House = 'HOUSE',\r\n  Food = 'FOOD',\r\n  Drink = 'DRINK',\r\n  Loan = 'LOAN',\r\n  Luxury = 'LUXURY',\r\n  Overhead = 'OVERHEAD',\r\n  Clothes = 'CLOTHES',\r\n  Phone = 'PHONE',\r\n  Travel = 'TRAVEL',\r\n  Other = 'OTHER',\r\n}\r\n\r\nexport enum NotificationType {\r\n  Error = 'Error',\r\n  Info = 'Info',\r\n}\r\n\r\nexport interface NotificationModel {\r\n  type?: NotificationType;\r\n  text: string;\r\n}","export const Colors = {\r\n  costBlue: '#3f51b5',\r\n  costRed: '#c00',\r\n  costGreen: '#0a0',\r\n  lightGray: '#f5f5f5',\r\n  yellow: '#e6da00',\r\n  cyan: '#28f8fd',\r\n  lightGreen: '#29fc88',\r\n  purple: '#c927fe',\r\n  darkGray: '#333',\r\n  pink: '#ff2698',\r\n  orange: '#ff7f27',\r\n  kheki: '#808000',\r\n};\r\n\r\nexport const Token = 'cost-token';\r\n\r\nexport const IncomeCategories = [\r\n  'Ajndk',\r\n  'llam',\r\n  'Befektets',\r\n  'Fizets',\r\n  'Klcsn',\r\n  'Egyb',\r\n];\r\n\r\nexport const IncomeCategoriesWithEmpty = [\r\n  '',\r\n  'Ajndk',\r\n  'llam',\r\n  'Befektets',\r\n  'Fizets',\r\n  'Klcsn',\r\n  'Egyb',\r\n];\r\n\r\nexport const CostCategories = [\r\n  'Ajndk',\r\n  'Aut',\r\n  'Bank',\r\n  'Befektets',\r\n  'Bevsrls',\r\n  'Gygyszertr',\r\n  'Hz',\r\n  'Kaja',\r\n  'Kocsma',\r\n  'Klcsn',\r\n  'Luxus',\r\n  'Rezsi',\r\n  'Ruha',\r\n  'Telefon',\r\n  'Utazs',\r\n  'Egyb',\r\n];\r\n\r\nexport const CostCategoriesWithEmpty = [\r\n  '',\r\n  'Ajndk',\r\n  'Aut',\r\n  'Bank',\r\n  'Befektets',\r\n  'Bevsrls',\r\n  'Gygyszertr',\r\n  'Hz',\r\n  'Kaja',\r\n  'Kocsma',\r\n  'Klcsn',\r\n  'Luxus',\r\n  'Rezsi',\r\n  'Ruha',\r\n  'Telefon',\r\n  'Utazs',\r\n  'Egyb',\r\n];\r\n\r\nexport const Months = [\r\n  'janur',\r\n  'februr',\r\n  'mrcius',\r\n  'prilis',\r\n  'mjus',\r\n  'jnius',\r\n  'jlius',\r\n  'augusztus',\r\n  'szeptember',\r\n  'oktber',\r\n  'november',\r\n  'december',\r\n];\r\n\r\nexport const CategoryCheckboxes = [\r\n  'Egyenleg',\r\n  'Bevtel',\r\n  'Kiads',\r\n  'Ajndk',\r\n  'Aut',\r\n  'Bank',\r\n  'Befektets',\r\n  'Bevsrls',\r\n  'Gygyszertr',\r\n  'Hz',\r\n  'Kaja',\r\n  'Kocsma',\r\n  'Klcsn',\r\n  'Luxus',\r\n  'Rezsi',\r\n  'Ruha',\r\n  'Telefon',\r\n  'Utazs',\r\n  'Egyb',\r\n];\r\n\r\nexport const LineColors = [\r\n  Colors.yellow,\r\n  Colors.purple,\r\n  Colors.lightGreen,\r\n  Colors.darkGray,\r\n  Colors.orange,\r\n  Colors.cyan,\r\n  Colors.kheki,\r\n  Colors.pink,\r\n];\r\n\r\nexport const LineChartAnimationLength = 1000;\r\nexport const BarChartAnimationLength = 700;\r\n\r\nexport const StartDate = new Date('2015-09-01');\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\nimport {\r\n  CostCategory,\r\n  IncomeCategory,\r\n  NotificationModel,\r\n  NotificationType,\r\n} from 'models/common.model';\r\n\r\nexport interface CommonState {\r\n  notification: NotificationModel | null;\r\n  descriptionMapping: DescriptionMappingModel;\r\n}\r\n\r\nexport interface DescriptionMappingModel {\r\n  [key: string]: CostCategory | IncomeCategory;\r\n}\r\n\r\nconst descriptionMapping = 'descriptionMapping';\r\n\r\nconst commonSlice = createSlice({\r\n  name: 'common',\r\n  initialState: {\r\n    notification: null,\r\n    descriptionMapping: JSON.parse(\r\n      localStorage.getItem(descriptionMapping) || '{}',\r\n    ),\r\n  } as CommonState,\r\n  reducers: {\r\n    setNotification: (\r\n      state,\r\n      action: PayloadAction<NotificationModel | null>,\r\n    ) => {\r\n      state.notification = action.payload;\r\n    },\r\n    addDescriptionMapping: (\r\n      state,\r\n      action: PayloadAction<DescriptionMappingModel>,\r\n    ) => {\r\n      state.descriptionMapping = {\r\n        ...state.descriptionMapping,\r\n        ...action.payload,\r\n      };\r\n      localStorage.setItem(\r\n        descriptionMapping,\r\n        JSON.stringify({\r\n          ...state.descriptionMapping,\r\n          ...action.payload,\r\n        }),\r\n      );\r\n    },\r\n  },\r\n});\r\n\r\nconst { actions, reducer } = commonSlice;\r\n\r\nexport const showNotification = ({\r\n  type = NotificationType.Info,\r\n  text,\r\n}: NotificationModel) => async (dispatch: AppDispatch) => {\r\n  dispatch(actions.setNotification({ type, text }));\r\n};\r\n\r\nexport const hideNotification = () => async (dispatch: AppDispatch) => {\r\n  dispatch(actions.setNotification(null));\r\n};\r\n\r\nexport const setDescriptionMapping = (\r\n  descriptionMapping: DescriptionMappingModel,\r\n) => async (dispatch: AppDispatch) => {\r\n  dispatch(actions.addDescriptionMapping(descriptionMapping));\r\n};\r\n\r\nexport default reducer;\r\n","import axios, { AxiosError, AxiosRequestConfig } from 'axios';\r\nimport { createBrowserHistory } from 'history';\r\n\r\nimport { Token } from 'common/Constants';\r\nimport store from 'store';\r\nimport { showNotification } from 'store/common';\r\nimport { NotificationType } from 'models/common.model';\r\nimport { logout } from 'store/auth';\r\n\r\nexport enum Methods {\r\n  GET = 'GET',\r\n  PUT = 'PUT',\r\n  POST = 'POST',\r\n  DELETE = 'DELETE',\r\n}\r\n\r\nexport interface RequestConfig extends AxiosRequestConfig {\r\n  resource: string;\r\n  method?: Methods;\r\n}\r\n\r\n// const API_BASE_URL = 'http://localhost:8080/api';\r\nconst API_BASE_URL = 'https://horvathadam.info/api';\r\n\r\nconst axiosInstance = axios.create({});\r\n\r\naxiosInstance.interceptors.response.use(\r\n  async (response) => response,\r\n  async (error: AxiosError) => {\r\n    //store.dispatch(hideLoader());\r\n    store.dispatch(\r\n      showNotification({\r\n        type: NotificationType.Error,\r\n        text: error.message,\r\n      }),\r\n    );\r\n    store.dispatch(logout());\r\n    return Promise.reject(error);\r\n  },\r\n);\r\n\r\nasync function request<T = void>({\r\n  resource,\r\n  method = Methods.POST,\r\n  ...config\r\n}: RequestConfig) {\r\n  config = config || {};\r\n  const token = localStorage.getItem(Token);\r\n  if (token) {\r\n    config = {\r\n      ...config,\r\n      headers: {\r\n        Authorization: token,\r\n      },\r\n    };\r\n  }\r\n  const { data: response } = await axiosInstance.request<T>({\r\n    method,\r\n    url: API_BASE_URL + resource,\r\n    ...config,\r\n  });\r\n  return response;\r\n}\r\n\r\nexport default request;\r\n","import {\r\n  CategoryType,\r\n  Collection,\r\n  CostCategory,\r\n  IncomeCategory,\r\n} from 'models/common.model';\r\nimport { ItemModel } from 'models/dashboard.model';\r\n\r\nexport interface QueryParamsModel {\r\n  collection: Collection;\r\n  category_type: CategoryType;\r\n  category?: CostCategory | IncomeCategory;\r\n  exclude_category?: boolean;\r\n  description?: string;\r\n  description_like?: boolean;\r\n  min_amount?: number;\r\n  max_amount?: number;\r\n  min_date?: Date;\r\n  max_date?: Date;\r\n  year?: number;\r\n  month?: number;\r\n}\r\n\r\nexport interface QueryDataModel {\r\n  success: boolean;\r\n  value: number;\r\n  numberOfItems: number;\r\n}\r\n\r\nexport interface QueryListModel {\r\n  success: boolean;\r\n  items: ItemModel[];\r\n}\r\n\r\nexport enum ListItemType {\r\n  Header = 'header',\r\n  Item = 'item',\r\n}\r\n\r\nexport interface ListItemModel extends ItemModel {\r\n  type: ListItemType;\r\n}\r\n\r\nexport interface QueryListItemModel {\r\n  success: boolean;\r\n  items: ListItemModel[];\r\n}\r\n\r\nexport enum ToggleState {\r\n  Left = 'left',\r\n  Right = 'right',\r\n}\r\n","import request from 'utils/request';\r\nimport { CredentialsModel, CredentialsResponseModel } from 'models/auth.model';\r\n\r\nexport class AuthService {\r\n  static async login(credentials: CredentialsModel) {\r\n    return await request<CredentialsResponseModel>({\r\n      resource: '/login',\r\n      data: credentials,\r\n    });\r\n  }\r\n}\r\n","import { AxiosError } from 'axios';\r\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { createBrowserHistory } from 'history';\r\n\r\nimport { AuthService } from 'services/auth.service';\r\nimport { CredentialsModel, CredentialsResponseModel } from 'models/auth.model';\r\nimport { Token } from 'common/Constants';\r\n\r\nexport interface AuthState {\r\n  loading: boolean;\r\n  token: string | null;\r\n  id?: string | null;\r\n  error: AxiosError | null;\r\n}\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState: {\r\n    loading: false,\r\n    token: localStorage.getItem(Token) || null,\r\n    id: null,\r\n    error: null,\r\n  } as AuthState,\r\n  reducers: {\r\n    setTokenAndId: (\r\n      state,\r\n      action: PayloadAction<CredentialsResponseModel | null>,\r\n    ) => {\r\n      setToken(action.payload?.token);\r\n      state.token = action.payload?.token || null;\r\n      state.id = action.payload?.id;\r\n    },\r\n    logout() {\r\n      setToken(null);\r\n      const history = createBrowserHistory();\r\n      history.go(0);\r\n    },\r\n  },\r\n});\r\n\r\nconst { actions, reducer } = authSlice;\r\n\r\nconst setToken = (token?: string | null) => {\r\n  if (token) {\r\n    localStorage.setItem(Token, token);\r\n  } else {\r\n    localStorage.removeItem(Token);\r\n  }\r\n};\r\n\r\nexport const login = (credentials: CredentialsModel) => async (\r\n  dispatch: AppDispatch,\r\n) => {\r\n  try {\r\n    const authResponse = await AuthService.login(credentials);\r\n    dispatch(actions.setTokenAndId(authResponse));\r\n  } catch (e) {\r\n    console.log(e);\r\n    throw e;\r\n  }\r\n};\r\n\r\nexport const logout = () => async (dispatch: AppDispatch) => {\r\n  dispatch(actions.logout());\r\n};\r\n\r\nexport default reducer;\r\n","import request from 'utils/request';\r\nimport { ChartDataModel, ChartParamsModel } from 'models/chart.model';\r\n\r\nexport class ChartService {\r\n  static async getChartData(params: ChartParamsModel) {\r\n    return await request<ChartDataModel>({\r\n      resource: '/v1/chart',\r\n      data: params,\r\n    });\r\n  }\r\n}\r\n","import { AxiosError } from 'axios';\r\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\nimport { ChartService } from 'services/chart.service';\r\nimport {\r\n  ChartDataModel,\r\n  ChartDataPoint,\r\n  ChartParamsModel,\r\n  MappedDataPoint,\r\n} from 'models/chart.model';\r\n\r\nexport interface ChartState {\r\n  loading: boolean;\r\n  BALANCE?: MappedDataPoint[];\r\n  COST?: MappedDataPoint[];\r\n  INCOME?: MappedDataPoint[];\r\n  SALARY?: MappedDataPoint[];\r\n  STATE?: MappedDataPoint[];\r\n  GIFT?: MappedDataPoint[];\r\n  LOAN?: MappedDataPoint[];\r\n  OTHER?: MappedDataPoint[];\r\n  BANK?: MappedDataPoint[];\r\n  CAR?: MappedDataPoint[];\r\n  CLOTHES?: MappedDataPoint[];\r\n  DRINK?: MappedDataPoint[];\r\n  FOOD?: MappedDataPoint[];\r\n  GROCERY?: MappedDataPoint[];\r\n  HOUSE?: MappedDataPoint[];\r\n  INVESTMENT?: MappedDataPoint[];\r\n  LUXURY?: MappedDataPoint[];\r\n  OVERHEAD?: MappedDataPoint[];\r\n  PHARMACY?: MappedDataPoint[];\r\n  PHONE?: MappedDataPoint[];\r\n  TRAVEL?: MappedDataPoint[];\r\n  prevBalance: number;\r\n  error: AxiosError | null;\r\n}\r\n\r\nconst chartSlice = createSlice({\r\n  name: 'chart',\r\n  initialState: {\r\n    loading: false,\r\n    BALANCE: undefined,\r\n    COST: undefined,\r\n    INCOME: undefined,\r\n    SALARY: undefined,\r\n    STATE: undefined,\r\n    GIFT: undefined,\r\n    LOAN: undefined,\r\n    OTHER: undefined,\r\n    BANK: undefined,\r\n    CAR: undefined,\r\n    CLOTHES: undefined,\r\n    DRINK: undefined,\r\n    FOOD: undefined,\r\n    GROCERY: undefined,\r\n    HOUSE: undefined,\r\n    INVESTMENT: undefined,\r\n    LUXURY: undefined,\r\n    OVERHEAD: undefined,\r\n    PHARMACY: undefined,\r\n    PHONE: undefined,\r\n    TRAVEL: undefined,\r\n    prevBalance: 0,\r\n    error: null,\r\n  } as ChartState,\r\n  reducers: {\r\n    setChartData: (state, action: PayloadAction<ChartDataModel>) => {\r\n      const { result } = action.payload;\r\n      if (result.BALANCE) {\r\n        state.prevBalance = result.PREV_BALANCE;\r\n        state.BALANCE = mapDataPoints(result.BALANCE, result.PREV_BALANCE);\r\n      } else {\r\n        state.BALANCE = undefined;\r\n      }\r\n      if (result.COST) {\r\n        state.COST = mapDataPoints(result.COST);\r\n      } else {\r\n        state.COST = undefined;\r\n      }\r\n      if (result.INCOME) {\r\n        state.INCOME = mapDataPoints(result.INCOME);\r\n      } else {\r\n        state.INCOME = undefined;\r\n      }\r\n      for (let key in result) {\r\n        if (\r\n          result.hasOwnProperty(key) &&\r\n          !['BALANCE', 'COST', 'INCOME', 'PREV_BALANCE'].includes(key)\r\n        ) {\r\n          // @ts-ignore\r\n          state[key] = mapDataPoints(result[key]);\r\n        }\r\n      }\r\n      for (let key of Object.keys(state).filter(\r\n        (key) =>\r\n          ![\r\n            'loading',\r\n            'error',\r\n            'BALANCE',\r\n            'COST',\r\n            'INCOME',\r\n            'prevBalance',\r\n          ].includes(key),\r\n      )) {\r\n        if (!result.hasOwnProperty(key)) {\r\n          // @ts-ignore\r\n          state[key] = undefined;\r\n        }\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nconst mapDataPoints = (\r\n  points: ChartDataPoint[],\r\n  prevBalance?: number,\r\n): MappedDataPoint[] => {\r\n  const mappedDataPoints: Array<MappedDataPoint> =\r\n    points.map((item) => {\r\n      const date = Object.keys(item)[0];\r\n      return {\r\n        year: Number(date.split('_')[0]),\r\n        month: Number(date.split('_')[1]),\r\n        amount: item[date],\r\n      };\r\n    }) || [];\r\n  mappedDataPoints.sort((a, b) =>\r\n    a.year < b.year ? -1 : a.year > b.year ? 1 : a.month < b.month ? -1 : 1,\r\n  );\r\n  if (prevBalance || prevBalance === 0) {\r\n    let sumAmount = prevBalance;\r\n    mappedDataPoints.forEach((item) => {\r\n      sumAmount += item.amount;\r\n      item.sumAmount = sumAmount;\r\n    });\r\n  }\r\n  return mappedDataPoints;\r\n};\r\n\r\nconst { actions, reducer } = chartSlice;\r\n\r\nexport const getChartData = (params: ChartParamsModel) => async (\r\n  dispatch: AppDispatch,\r\n) => {\r\n  try {\r\n    const result = await ChartService.getChartData(params);\r\n    dispatch(actions.setChartData(result));\r\n  } catch (e) {\r\n    console.log(e);\r\n    throw e;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import request, { Methods } from 'utils/request';\r\nimport {\r\n  DashboardDataModel,\r\n  DashboardParamsModel,\r\n  ItemParamsModel,\r\n  ItemResponseModel,\r\n} from 'models/dashboard.model';\r\n\r\nexport class DashboardService {\r\n  static async getDashboardData(params: DashboardParamsModel) {\r\n    return await request<DashboardDataModel>({\r\n      resource: '/v1/main',\r\n      data: params,\r\n    });\r\n  }\r\n\r\n  static async createItem(params: ItemParamsModel) {\r\n    return await request<ItemResponseModel>({\r\n      resource: '/v1/item',\r\n      data: params,\r\n    });\r\n  }\r\n\r\n  static async updateItem(params: ItemParamsModel) {\r\n    return await request<ItemResponseModel>({\r\n      method: Methods.PUT,\r\n      resource: '/v1/item',\r\n      data: params,\r\n    });\r\n  }\r\n\r\n  static async deleteItem(id: string) {\r\n    return await request<ItemResponseModel>({\r\n      method: Methods.DELETE,\r\n      resource: `/v1/item/${id}`,\r\n    });\r\n  }\r\n}\r\n","import { AxiosError } from 'axios';\r\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\nimport { DashboardService } from 'services/dashboard.service';\r\nimport {\r\n  DashboardDataModel,\r\n  DashboardParamsModel,\r\n  ItemModel,\r\n  ItemParamsModel,\r\n} from 'models/dashboard.model';\r\nimport { showNotification } from './common';\r\n\r\nexport interface DashboardState {\r\n  loading: boolean;\r\n  items: ItemModel[];\r\n  balance: number;\r\n  error: AxiosError | null;\r\n}\r\n\r\nconst dashboardSlice = createSlice({\r\n  name: 'dashboard',\r\n  initialState: {\r\n    loading: false,\r\n    items: [],\r\n    balance: 0,\r\n    error: null,\r\n  } as DashboardState,\r\n  reducers: {\r\n    setDashboardData: (state, action: PayloadAction<DashboardDataModel>) => {\r\n      state.items = action.payload.items;\r\n      state.balance = action.payload.balance;\r\n    },\r\n  },\r\n});\r\n\r\nconst { actions, reducer } = dashboardSlice;\r\n\r\nexport const getDashboardData = (params: DashboardParamsModel) => async (\r\n  dispatch: AppDispatch,\r\n) => {\r\n  try {\r\n    const data = await DashboardService.getDashboardData(params);\r\n    dispatch(actions.setDashboardData(data));\r\n  } catch (e) {\r\n    console.log(e);\r\n    throw e;\r\n  }\r\n};\r\n\r\nexport const createItem = (item: ItemParamsModel) => async (\r\n  dispatch: AppDispatch,\r\n) => {\r\n  try {\r\n    const response = await DashboardService.createItem(item);\r\n    dispatch(showNotification({ text: response.msg }));\r\n  } catch (e) {\r\n    console.log(e);\r\n    throw e;\r\n  }\r\n};\r\n\r\nexport const updateItem = (item: ItemParamsModel) => async (\r\n  dispatch: AppDispatch,\r\n) => {\r\n  try {\r\n    const response = await DashboardService.updateItem(item);\r\n    dispatch(showNotification({ text: response.msg }));\r\n  } catch (e) {\r\n    console.log(e);\r\n    throw e;\r\n  }\r\n};\r\n\r\nexport const deleteItem = (id: string) => async (dispatch: AppDispatch) => {\r\n  try {\r\n    const response = await DashboardService.deleteItem(id);\r\n    dispatch(showNotification({ text: response.msg }));\r\n  } catch (e) {\r\n    console.log(e);\r\n    throw e;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import request from \"utils/request\";\r\nimport {\r\n  QueryParamsModel,\r\n  QueryDataModel,\r\n  QueryListModel\r\n} from \"models/query.model\";\r\n\r\nexport class QueryService {\r\n  static async getQueryData(params: QueryParamsModel) {\r\n    return await request<QueryDataModel>({\r\n      resource: \"/v1/query\",\r\n      data: params\r\n    });\r\n  }\r\n\r\n  static async getQueryList(params: QueryParamsModel) {\r\n    return await request<QueryListModel>({\r\n      resource: \"/v1/query-list\",\r\n      data: params\r\n    });\r\n  }\r\n}\r\n","import { AxiosError } from 'axios';\r\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\nimport { QueryService } from 'services/query.service';\r\nimport {\r\n  ListItemModel,\r\n  ListItemType,\r\n  QueryDataModel,\r\n  QueryListItemModel,\r\n  QueryParamsModel,\r\n} from 'models/query.model';\r\nimport { ItemModel } from 'models/dashboard.model';\r\nimport { CategoryType, CostCategory } from 'models/common.model';\r\n\r\nexport interface QueryState {\r\n  loading: boolean;\r\n  queryData: QueryDataModel | null;\r\n  queryList: QueryListItemModel | null;\r\n  error: AxiosError | null;\r\n}\r\n\r\nconst querySlice = createSlice({\r\n  name: 'query',\r\n  initialState: {\r\n    loading: false,\r\n    queryData: null,\r\n    queryList: null,\r\n    error: null,\r\n  } as QueryState,\r\n  reducers: {\r\n    setQueryData: (state, action: PayloadAction<QueryDataModel>) => {\r\n      state.queryData = action.payload;\r\n    },\r\n    setQueryList: (state, action: PayloadAction<QueryListItemModel>) => {\r\n      state.queryList = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nconst { actions, reducer } = querySlice;\r\n\r\nexport const getQueryData = (params: QueryParamsModel) => async (\r\n  dispatch: AppDispatch,\r\n) => {\r\n  try {\r\n    const result = await QueryService.getQueryData(params);\r\n    dispatch(actions.setQueryData(result));\r\n  } catch (e) {\r\n    console.log(e);\r\n    throw e;\r\n  }\r\n};\r\n\r\nconst mockItem: Omit<ItemModel, 'date'> = {\r\n  _id: '',\r\n  group_id: '',\r\n  amount: 0,\r\n  category: CostCategory.Other,\r\n  category_type: CategoryType.Cost,\r\n  year: 2015,\r\n  month: 8,\r\n  day: 1,\r\n  description: '',\r\n};\r\n\r\nexport const getQueryList = (params: QueryParamsModel) => async (\r\n  dispatch: AppDispatch,\r\n) => {\r\n  try {\r\n    const result = await QueryService.getQueryList(params);\r\n    const items: ListItemModel[] = [];\r\n    let date: string | null = null;\r\n    result.items.forEach(item => {\r\n      if (date == null || date !== item.date) {\r\n        items.push({\r\n          type: ListItemType.Header,\r\n          date: item.date,\r\n          ...mockItem,\r\n        });\r\n        date = item.date;\r\n      }\r\n      items.push({ type: ListItemType.Item, ...item });\r\n    });\r\n    dispatch(actions.setQueryList({ ...result, items }));\r\n  } catch (e) {\r\n    console.log(e);\r\n    throw e;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import request from 'utils/request';\r\nimport { StatsResponseModel } from 'models/stats.model';\r\n\r\nexport class StatsService {\r\n  static async getStatsData(date: string) {\r\n    return await request<StatsResponseModel>({\r\n      resource: '/v1/stats',\r\n      data: {\r\n        date,\r\n      },\r\n    });\r\n  }\r\n}\r\n","import { AxiosError } from 'axios';\r\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\nimport { StatsService } from 'services/stats.service';\r\nimport { StatsResponseModel } from 'models/stats.model';\r\n\r\nexport interface StatsState {\r\n  loading: boolean;\r\n  data: StatsResponseModel | null;\r\n  error: AxiosError | null;\r\n}\r\n\r\nconst statsSlice = createSlice({\r\n  name: 'stats',\r\n  initialState: {\r\n    loading: false,\r\n    data: null,\r\n    error: null,\r\n  } as StatsState,\r\n  reducers: {\r\n    setStatsData: (state, action: PayloadAction<StatsResponseModel>) => {\r\n      state.data = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nconst { actions, reducer } = statsSlice;\r\n\r\nexport const getStatsData = (date: string) => async (\r\n  dispatch: AppDispatch,\r\n) => {\r\n  try {\r\n    const result = await StatsService.getStatsData(date);\r\n    dispatch(actions.setStatsData(result));\r\n  } catch (e) {\r\n    console.log(e);\r\n    throw e;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { combineReducers, configureStore } from '@reduxjs/toolkit';\r\n\r\nimport authReducer from './auth';\r\nimport chartReducer from './chart';\r\nimport commonReducer from './common';\r\nimport dashboardReducer from './dashboard';\r\nimport queryReducer from './query';\r\nimport statsReducer from './stats';\r\n\r\nconst rootReducer = combineReducers({\r\n  auth: authReducer,\r\n  chart: chartReducer,\r\n  common: commonReducer,\r\n  dashboard: dashboardReducer,\r\n  query: queryReducer,\r\n  stats: statsReducer,\r\n});\r\n\r\nconst store = configureStore({\r\n  reducer: rootReducer,\r\n});\r\n\r\nexport default store;\r\n\r\ndeclare global {\r\n  type ApplicationState = ReturnType<typeof rootReducer>;\r\n\r\n  type AppDispatch = typeof store.dispatch;\r\n\r\n  type GetState = () => ApplicationState;\r\n}\r\n","import React, { FC } from 'react';\r\n\r\nimport './TextStripMenu.scss';\r\n\r\nexport interface TextStripMenuProps {\r\n  logout: () => void;\r\n}\r\n\r\nexport const TextStripMenu: FC<TextStripMenuProps> = ({ logout }) => {\r\n  return (\r\n    <div className=\"text-strip-menu\">\r\n      <span className=\"menu-item\" onClick={logout}>\r\n        <div className={'logout-icon'} />\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n","import React, { FC, useEffect, useRef } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport classNames from 'classnames';\r\n\r\nimport './Hamburger.scss';\r\n\r\nexport interface HamburgerProps {\r\n  openMenu: boolean;\r\n  switchMenuState: () => void;\r\n  logout: () => void;\r\n}\r\n\r\nexport const Hamburger: FC<HamburgerProps> = ({\r\n  openMenu,\r\n  switchMenuState,\r\n  logout,\r\n}) => {\r\n  const { t } = useTranslation();\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, [openMenu]);\r\n\r\n  const menuPanelRef = useRef<HTMLDivElement>(null);\r\n  const hamburgerIconRef = useRef<HTMLDivElement>(null);\r\n\r\n  const handleClickOutside = (event: Event) => {\r\n    if (\r\n      menuPanelRef &&\r\n      !menuPanelRef.current?.contains(event.target as Node) &&\r\n      hamburgerIconRef &&\r\n      !hamburgerIconRef.current?.contains(event.target as Node) &&\r\n      openMenu\r\n    ) {\r\n      switchMenuState();\r\n    }\r\n  };\r\n\r\n  const onMenuClick = () => {\r\n    switchMenuState();\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div\r\n        ref={hamburgerIconRef}\r\n        className={classNames('hamburger-icon', { cross: openMenu })}\r\n        onClick={onMenuClick}\r\n      >\r\n        <div />\r\n        <div />\r\n        <div />\r\n      </div>\r\n      <div\r\n        ref={menuPanelRef}\r\n        className={`hamburger-panel ${openMenu ? 'open' : 'closed'}`}\r\n      >\r\n        <div className=\"menu-item\">\r\n          <Link to=\"/cost\" onClick={onMenuClick}>\r\n            {t('MENU.MAIN')}\r\n          </Link>\r\n        </div>\r\n        <div className=\"menu-item\">\r\n          <Link to=\"/stats\" onClick={onMenuClick}>\r\n            {t('MENU.STATS')}\r\n          </Link>\r\n        </div>\r\n        <div className=\"menu-item\">\r\n          <Link to=\"/query\" onClick={onMenuClick}>\r\n            {t('MENU.QUERIES')}\r\n          </Link>\r\n        </div>\r\n        <div className=\"menu-item\">\r\n          <Link to=\"/chart\" onClick={onMenuClick}>\r\n            {t('MENU.CHARTS')}\r\n          </Link>\r\n        </div>\r\n        <div className=\"menu-item\" onClick={logout}>\r\n          {t('MENU.LOGOUT')}\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n};\r\n","import React, { FC } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport './Menu.scss';\r\n\r\nexport const Menu: FC<{}> = () => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <div className=\"menu row\">\r\n      <div className=\"entry-container col-sm-3\">\r\n        <Link to=\"/cost\" className=\"menu-entry\">\r\n          {t('MENU.MAIN')}\r\n        </Link>\r\n      </div>\r\n      <div className=\"entry-container col-sm-3\">\r\n        <Link to=\"/stats\" className=\"menu-entry\">\r\n          {t('MENU.STATS')}\r\n        </Link>\r\n      </div>\r\n      <div className=\"entry-container col-sm-3\">\r\n        <Link to=\"/query\" className=\"menu-entry\">\r\n          {t('MENU.QUERIES')}\r\n        </Link>\r\n      </div>\r\n      <div className=\"entry-container col-sm-3\">\r\n        <Link to=\"/chart\" className=\"menu-entry\">\r\n          {t('MENU.CHARTS')}\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","export function compose(...functions: Function[]) {\r\n  if (functions.length === 0) {\r\n    return <T>(arg: T) => arg;\r\n  }\r\n\r\n  if (functions.length === 1) {\r\n    return functions[0];\r\n  }\r\n\r\n  return functions.reduce((a, b) => (...args: any) => a(b(...args)));\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { withTranslation, WithTranslation } from 'react-i18next';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { TextStripMenu } from './TextStripMenu';\r\nimport { Hamburger } from './Hamburger';\r\nimport { Menu } from './Menu';\r\nimport { logout } from 'store/auth';\r\nimport { compose } from 'utils/compose';\r\nimport logo from 'logo.svg';\r\nimport './Header.scss';\r\n\r\nexport interface HeaderProps\r\n  extends WithTranslation,\r\n    ConnectedProps<typeof connector> {}\r\n\r\ninterface HeaderState {\r\n  openMenu: boolean;\r\n}\r\n\r\nclass Header extends Component<HeaderProps, HeaderState> {\r\n  state = {\r\n    openMenu: false,\r\n  };\r\n\r\n  switchMenuState = () => {\r\n    this.setState({ openMenu: !this.state.openMenu });\r\n  };\r\n\r\n  logout = () => {\r\n    this.setState({ openMenu: false });\r\n    this.props.logout();\r\n  };\r\n\r\n  render() {\r\n    const { t, token } = this.props;\r\n    return (\r\n      <header>\r\n        <div className={'header-top'}>\r\n          <Link to=\"/cost\">\r\n            <img src={logo} className=\"logo\" alt=\"logo\" />\r\n          </Link>\r\n          <Link to=\"/cost\">\r\n            <h1 className=\"title\">{t('COMMON.APP_NAME')}</h1>\r\n          </Link>\r\n          {token ? (\r\n            <React.Fragment>\r\n              <TextStripMenu logout={this.logout} />\r\n              <Hamburger\r\n                openMenu={this.state.openMenu}\r\n                switchMenuState={this.switchMenuState}\r\n                logout={this.logout}\r\n              />\r\n            </React.Fragment>\r\n          ) : null}\r\n        </div>\r\n        {token ? <Menu /> : null}\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: ApplicationState) => {\r\n  return {\r\n    token: state.auth.token,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  logout,\r\n};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport default compose(connector)(withTranslation()(Header));\r\n","import * as Yup from 'yup';\r\nimport i18n from 'i18n';\r\n\r\nYup.setLocale({\r\n  mixed: {\r\n    required: () => i18n.t('ERRORS.FIELD_REQUIRED'),\r\n  },\r\n  string: {\r\n    email: () => i18n.t('ERRORS.EMAIL_INVALID'),\r\n  },\r\n});\r\n\r\nexport default Yup;\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { WithTranslation, withTranslation } from 'react-i18next';\r\nimport { registerLocale } from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport 'moment/locale/hu';\r\nimport hu from 'date-fns/locale/hu';\r\n\r\nimport { ItemModal } from './ItemModal';\r\nimport { compose } from 'utils/compose';\r\nimport {\r\n  createItem,\r\n  deleteItem,\r\n  getDashboardData,\r\n  updateItem,\r\n} from 'store/dashboard';\r\nimport { dayPagingAvailable, getMoneyString } from 'utils/util';\r\nimport { AddItemContainer } from './AddItemContainer';\r\nimport { DatePickerContainer } from './DatePickerContainer';\r\nimport { ItemList } from './ItemList';\r\nimport { CostCategories, IncomeCategories } from 'common/Constants';\r\nimport { CostCategory, IncomeCategory } from 'models/common.model';\r\nimport './Dashboard.scss';\r\nimport 'components/datepicker/DatePicker.scss';\r\nimport { setDescriptionMapping } from 'store/common';\r\n\r\nexport interface DashboardPageProps\r\n  extends WithTranslation,\r\n    ConnectedProps<typeof connector> {}\r\n\r\ninterface DashboardPageState {\r\n  itemModalShown: boolean;\r\n  confirmModalShown: boolean;\r\n  date: Date;\r\n  isPagingAvailable: PagingAvailable;\r\n  modalType: ModalType;\r\n  currentItemId: string;\r\n  isCost: boolean;\r\n}\r\n\r\nexport enum ModalType {\r\n  ADD = 'ADD',\r\n  UPDATE = 'UPDATE',\r\n}\r\n\r\nexport interface PagingAvailable {\r\n  left: boolean;\r\n  right: boolean;\r\n}\r\n\r\nclass Dashboard extends Component<DashboardPageProps, DashboardPageState> {\r\n  readonly state = {\r\n    itemModalShown: false,\r\n    confirmModalShown: false,\r\n    date: new Date(),\r\n    isPagingAvailable: {\r\n      left: true,\r\n      right: false,\r\n    },\r\n    modalType: ModalType.ADD,\r\n    currentItemId: '',\r\n    isCost: false,\r\n  };\r\n\r\n  getData = async () => {\r\n    const { getDashboardData } = this.props;\r\n    await getDashboardData({ date: this.state.date.toISOString() });\r\n  };\r\n\r\n  onDateChange = async (date: Date) => {\r\n    date.setHours(6);\r\n    date.setMinutes(0);\r\n    date.setSeconds(0);\r\n    date.setMilliseconds(0);\r\n    await this.setState({ date });\r\n    this.handleDateChange();\r\n  };\r\n\r\n  changeDateWith = async (value: number) => {\r\n    const date = this.state.date;\r\n    date.setDate(this.state.date.getDate() + value);\r\n    await this.setState({ date });\r\n    this.handleDateChange();\r\n  };\r\n\r\n  handleDateChange = async () => {\r\n    this.setPagingAvailable();\r\n    await this.getData();\r\n  };\r\n\r\n  showItemModal = (\r\n    isCost: boolean,\r\n    modalType: ModalType,\r\n    currentItemId?: string,\r\n  ) => {\r\n    const newState: DashboardPageState = {\r\n      ...this.state,\r\n      itemModalShown: true,\r\n      modalType,\r\n      isCost,\r\n    };\r\n    if (currentItemId) {\r\n      newState.currentItemId = currentItemId;\r\n    }\r\n    this.setState(newState);\r\n  };\r\n\r\n  hideItemModal = () => {\r\n    this.setState(\r\n      {\r\n        itemModalShown: false,\r\n        currentItemId: '',\r\n        isCost: false,\r\n      },\r\n      async () => await this.getData(),\r\n    );\r\n  };\r\n\r\n  setPagingAvailable = () => {\r\n    this.setState({\r\n      isPagingAvailable: dayPagingAvailable(this.state.date),\r\n    });\r\n  };\r\n\r\n  async componentDidMount() {\r\n    await this.getData();\r\n    registerLocale('hu', hu);\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      t,\r\n      balance,\r\n      items,\r\n      createItem,\r\n      updateItem,\r\n      deleteItem,\r\n      setDescriptionMapping,\r\n      descriptionMapping,\r\n    } = this.props;\r\n    const {\r\n      date,\r\n      isPagingAvailable,\r\n      itemModalShown,\r\n      modalType,\r\n      currentItemId,\r\n      isCost,\r\n    } = this.state;\r\n    if (!items) {\r\n      return null;\r\n    }\r\n    const currentItem = items.find((item) => item._id === currentItemId);\r\n    return (\r\n      <div className=\"dashboard\">\r\n        <div className=\"balance\">\r\n          {t('DASHBOARD.BALANCE', { balance: getMoneyString(balance) })}\r\n        </div>\r\n        <AddItemContainer showItemModal={this.showItemModal} />\r\n        <DatePickerContainer\r\n          date={date}\r\n          onDateChange={this.onDateChange}\r\n          changeDateWith={this.changeDateWith}\r\n          isPagingAvailable={isPagingAvailable}\r\n        />\r\n        <ItemList showItemModal={this.showItemModal} items={items} />\r\n        <ItemModal\r\n          shown={itemModalShown}\r\n          id={currentItemId}\r\n          hide={this.hideItemModal}\r\n          category={\r\n            currentItem\r\n              ? t(\r\n                  `COMMON.CATEGORIES.${\r\n                    currentItem.category as CostCategory | IncomeCategory\r\n                  }`,\r\n                )\r\n              : isCost\r\n              ? (CostCategories[0] as CostCategory)\r\n              : (IncomeCategories[0] as IncomeCategory)\r\n          }\r\n          amount={currentItem?.amount}\r\n          description={currentItem?.description}\r\n          date={date}\r\n          type={modalType}\r\n          createItem={createItem}\r\n          updateItem={updateItem}\r\n          deleteItem={deleteItem}\r\n          isCost={isCost}\r\n          setDescriptionMapping={setDescriptionMapping}\r\n          descriptionMapping={descriptionMapping}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: ApplicationState) => {\r\n  return {\r\n    balance: state.dashboard.balance,\r\n    items: state.dashboard.items,\r\n    notification: state.common.notification,\r\n    descriptionMapping: state.common.descriptionMapping,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  getDashboardData,\r\n  createItem,\r\n  updateItem,\r\n  deleteItem,\r\n  setDescriptionMapping,\r\n};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport default compose(connector)(withTranslation()(Dashboard));\r\n","import React, { Component } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { withTranslation, WithTranslation } from 'react-i18next';\r\nimport { Field, Form, Formik } from 'formik';\r\n\r\nimport { login } from 'store/auth';\r\nimport { compose } from 'utils/compose';\r\nimport { CredentialsModel } from 'models/auth.model';\r\nimport Yup from 'utils/yup';\r\nimport './Login.scss';\r\n\r\ninterface LoginPageProps\r\n  extends ConnectedProps<typeof connector>,\r\n    WithTranslation {}\r\n\r\nclass Login extends Component<LoginPageProps> {\r\n  onSubmit = async (credentials: CredentialsModel) => {\r\n    const { login } = this.props;\r\n    await login(credentials);\r\n  };\r\n\r\n  render() {\r\n    const { t } = this.props;\r\n    return (\r\n      <div className=\"login\">\r\n        <Formik\r\n          initialValues={{ email: '', password: '' } as CredentialsModel}\r\n          validateOnChange={false}\r\n          onSubmit={this.onSubmit}\r\n          validationSchema={() =>\r\n            Yup.object().shape({\r\n              email: Yup.string()\r\n                .email(t('ERRORS.EMAIL_INVALID'))\r\n                .required(t('ERRORS.FIELD_REQUIRED')),\r\n              password: Yup.string().required(t('ERRORS.FIELD_REQUIRED')),\r\n            })\r\n          }\r\n        >\r\n          <Form noValidate className=\"input-box\">\r\n            <label htmlFor={'email'} className=\"email-label\">\r\n              {t('LOGIN.EMAIL')}\r\n            </label>\r\n            <Field\r\n              label={t('LOGIN.EMAIL')}\r\n              placeholder={t('LOGIN.EMAIL')}\r\n              name={'email'}\r\n              type={'email'}\r\n            />\r\n            <label htmlFor={'password'} className=\"password-label\">\r\n              {t('LOGIN.PASSWORD')}\r\n            </label>\r\n            <Field\r\n              label={t('LOGIN.PASSWORD')}\r\n              placeholder={t('LOGIN.PASSWORD')}\r\n              name={'password'}\r\n              type={'password'}\r\n            />\r\n            <button type=\"submit\">{t('LOGIN.LOGIN')}</button>\r\n          </Form>\r\n        </Formik>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  login,\r\n};\r\n\r\nconst connector = connect(null, mapDispatchToProps);\r\n\r\nexport default compose(connector)(withTranslation()(Login));\r\n","import React, { FC, MouseEvent } from 'react';\r\nimport { Button, Modal } from 'react-bootstrap';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport 'components/dialog/Dialog.scss';\r\n\r\nexport interface ConfirmModalProps {\r\n  shown: boolean;\r\n  onCancel: (event: MouseEvent) => void;\r\n  onConfirm: (event: MouseEvent) => void;\r\n}\r\n\r\nexport const ConfirmModal: FC<ConfirmModalProps> = ({\r\n  shown,\r\n  onCancel,\r\n  onConfirm,\r\n}) => {\r\n  const { t } = useTranslation();\r\n  return <Modal className=\"confirm-modal\" show={shown} onHide={onCancel}>\r\n      <Modal.Header>\r\n        <Modal.Title>{t('DASHBOARD.DELETE.TITLE')}</Modal.Title>\r\n        <div className=\"delete-icon\" />\r\n      </Modal.Header>\r\n\r\n      <Modal.Body>{t('DASHBOARD.DELETE.ARE_YOU_SURE')}</Modal.Body>\r\n\r\n      <Modal.Footer>\r\n        <Button onClick={onCancel} variant={'secondary'}>\r\n          {t('COMMON.CANCEL')}\r\n        </Button>\r\n        <Button variant={'primary'} onClick={onConfirm}>\r\n          {t('COMMON.OK')}\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>;\r\n};\r\n","import React, { FC } from 'react';\r\nimport DatePicker from 'react-datepicker';\r\n\r\nexport interface DatePickerWrapperProps {\r\n  date: Date | null;\r\n  onChange: (date: Date) => void;\r\n  minDate?: Date | null;\r\n  maxDate?: Date | null;\r\n}\r\n\r\nexport const DatePickerWrapper: FC<DatePickerWrapperProps> = ({\r\n  date,\r\n  onChange,\r\n  minDate = new Date('2015-09-30'),\r\n  maxDate = new Date(),\r\n}) => (\r\n  <DatePicker\r\n    selected={date}\r\n    onChange={onChange}\r\n    locale=\"hu\"\r\n    dropdownMode={'select'}\r\n    todayButton={'Mai nap'}\r\n    isClearable={false}\r\n    minDate={minDate}\r\n    maxDate={maxDate}\r\n    dateFormatCalendar=\"yyyy. MMMM\"\r\n    popperPlacement={'center'}\r\n    dateFormat={'yyyy. MM. dd.'}\r\n  />\r\n);\r\n","import React, { FC, useEffect } from 'react';\r\nimport { FieldProps } from 'formik';\r\nimport { Colors } from 'common/Constants';\r\n\r\nexport interface InputWrapperProps extends FieldProps {\r\n  type: string;\r\n  setFieldValue: (field: string, value: any) => void;\r\n  onChange?: (value: any) => void;\r\n  name: string;\r\n  value?: string;\r\n}\r\n\r\nexport const InputWrapper: FC<InputWrapperProps> = props => {\r\n  const { form, type, field, setFieldValue, ...propsToPass } = props;\r\n  useEffect(() => {\r\n    form.validateForm();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <input\r\n        type={type}\r\n        value={field.value}\r\n        onChange={(event: React.ChangeEvent<HTMLInputElement>) => {\r\n          console.log('onChange');\r\n          if (setFieldValue) {\r\n            console.log(event.target.value);\r\n            setFieldValue(props.name, event.target.value);\r\n          }\r\n          if (props.onChange) {\r\n            props.onChange(event);\r\n          }\r\n        }}\r\n        {...propsToPass}\r\n      />\r\n      {form.errors[field.name] &&\r\n        form.touched[field.name] && (\r\n          <span style={{ color: Colors.costRed }}>\r\n            {form.errors[field.name]}\r\n          </span>\r\n        )}\r\n    </>\r\n  );\r\n};\r\n","import React, { ChangeEvent, FC, useEffect, useState } from 'react';\r\nimport { registerLocale } from 'react-datepicker';\r\nimport { Field, Form, Formik } from 'formik';\r\nimport { useTranslation } from 'react-i18next';\r\nimport hu from 'date-fns/locale/hu';\r\nimport { Button, Dropdown, DropdownButton, Modal } from 'react-bootstrap';\r\n\r\nimport { CostCategories, IncomeCategories } from 'common/Constants';\r\nimport { ConfirmModal } from './ConfirmModal';\r\nimport { DatePickerWrapper } from 'components/datepicker/DatePickerWrapper';\r\nimport { InputWrapper } from 'components/input/InputWrapper';\r\nimport {\r\n  CategoryType,\r\n  CostCategory,\r\n  IncomeCategory,\r\n} from 'models/common.model';\r\nimport { ModalType } from './Dashboard';\r\nimport Yup from 'utils/yup';\r\nimport { ItemParamsModel } from 'models/dashboard.model';\r\nimport 'components/datepicker/DatePicker.scss';\r\nimport 'styles/dropdown.scss';\r\nimport 'components/dialog/Dialog.scss';\r\nimport { DescriptionMappingModel } from 'store/common';\r\n\r\nexport interface ItemModalProps {\r\n  shown: boolean;\r\n  createItem: (item: ItemParamsModel) => void;\r\n  updateItem: (item: ItemParamsModel) => void;\r\n  deleteItem: (id: string) => void;\r\n  amount?: number;\r\n  date: Date;\r\n  category: CostCategory | IncomeCategory;\r\n  description?: string;\r\n  hide: () => void;\r\n  type: ModalType;\r\n  isCost: boolean;\r\n  id?: string;\r\n  setDescriptionMapping: (\r\n    descriptionMapping: DescriptionMappingModel,\r\n  ) => Promise<void>;\r\n  descriptionMapping: DescriptionMappingModel;\r\n}\r\n\r\nexport const ItemModal: FC<ItemModalProps> = ({\r\n  shown,\r\n  amount,\r\n  date,\r\n  category,\r\n  description,\r\n  id,\r\n  hide,\r\n  type,\r\n  isCost,\r\n  createItem,\r\n  updateItem,\r\n  deleteItem,\r\n  setDescriptionMapping,\r\n  descriptionMapping,\r\n}) => {\r\n  useEffect(() => {\r\n    registerLocale('hu', hu);\r\n  }, []);\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const validationSchema = Yup.object().shape({\r\n    amount: Yup.number()\r\n      .required(t('ERRORS.FIELD_REQUIRED'))\r\n      .test(\r\n        'amount',\r\n        t('ERRORS.AMOUNT_INVALID'),\r\n        (value) =>\r\n          !!value &&\r\n          !!value\r\n            .toString()\r\n            .trim()\r\n            .replace(/[^0-9]/g, '').length,\r\n      ),\r\n    category: Yup.string().required(t('ERRORS.FIELD_REQUIRED')),\r\n    date: Yup.string().required(t('ERRORS.FIELD_REQUIRED')),\r\n  });\r\n\r\n  const [confirmModalShown, setConfirmModalShown] = useState(false);\r\n  const [isValidForm, setValidForm] = useState(!!id);\r\n  let validatedForm = !!id;\r\n\r\n  const showConfirmModal = () => {\r\n    setConfirmModalShown(true);\r\n  };\r\n\r\n  const hideConfirmModal = () => {\r\n    setConfirmModalShown(false);\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    id && (await deleteItem(id));\r\n    setConfirmModalShown(false);\r\n    hide();\r\n  };\r\n\r\n  const onSubmitForm = async (item: Omit<ItemParamsModel, 'category_type'>) => {\r\n    const { date, category, amount, description } = item;\r\n    const data: ItemParamsModel = {\r\n      category_type: isCost ? CategoryType.Cost : CategoryType.Income,\r\n      date: date,\r\n      category: t(`COMMON.ENGLISH_CATEGORIES.${category}`),\r\n      amount: amount,\r\n      description: description?.trim() || '',\r\n    };\r\n    if (id) {\r\n      data.id = id;\r\n    }\r\n    if (\r\n      description &&\r\n      (!descriptionMapping[description.trim()] ||\r\n        descriptionMapping[description.trim()] !==\r\n          t(`COMMON.ENGLISH_CATEGORIES.${category}`))\r\n    ) {\r\n      setDescriptionMapping({\r\n        [description.trim()]: t(`COMMON.ENGLISH_CATEGORIES.${category}`),\r\n      });\r\n    }\r\n    if (type === ModalType.ADD) {\r\n      await createItem(data);\r\n    } else {\r\n      await updateItem(data);\r\n    }\r\n    hide();\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Modal show={shown && !confirmModalShown} onHide={hide}>\r\n        <Formik\r\n          initialValues={{\r\n            amount,\r\n            category,\r\n            description,\r\n            date: date.toISOString(),\r\n          }}\r\n          validateOnChange={true}\r\n          validateOnMount={true}\r\n          onSubmit={onSubmitForm}\r\n          validationSchema={validationSchema}\r\n        >\r\n          {({\r\n            values,\r\n            setFieldValue,\r\n            isValid,\r\n            validateForm,\r\n            setFieldTouched,\r\n          }) => {\r\n            if (!validatedForm) {\r\n              validateForm();\r\n              validatedForm = true;\r\n            }\r\n            if (isValidForm !== isValid) {\r\n              setValidForm(isValid);\r\n            }\r\n            const categories: (CostCategory | IncomeCategory)[] = isCost\r\n              ? (CostCategories as CostCategory[])\r\n              : (IncomeCategories as IncomeCategory[]);\r\n            return (\r\n              <Form noValidate className=\"input-box\">\r\n                <Modal.Header>\r\n                  <Modal.Title>\r\n                    {type === ModalType.UPDATE\r\n                      ? t('DASHBOARD.ITEM_MODAL.UPDATE_AMOUNT')\r\n                      : t('DASHBOARD.ITEM_MODAL.ADD_AMOUNT', {\r\n                          itemType: isCost\r\n                            ? t('COMMON.CATEGORIES.COST')\r\n                            : t('COMMON.CATEGORIES.INCOME'),\r\n                        })}\r\n                  </Modal.Title>\r\n                  {type === ModalType.UPDATE ? (\r\n                    <div className=\"delete-icon\" onClick={showConfirmModal} />\r\n                  ) : null}\r\n                </Modal.Header>\r\n\r\n                <Modal.Body>\r\n                  <label htmlFor={'amount'} className=\"label amount-label\">\r\n                    {t('DASHBOARD.ITEM_MODAL.AMOUNT')}\r\n                  </label>\r\n                  <Field\r\n                    label={t('DASHBOARD.ITEM_MODAL.AMOUNT')}\r\n                    className={'amount'}\r\n                    name={'amount'}\r\n                    type={'number'}\r\n                    component={InputWrapper}\r\n                    onBlur={() => {\r\n                      setFieldTouched('amount', true);\r\n                    }}\r\n                    setFieldValue={setFieldValue}\r\n                    onChange={(event: ChangeEvent<HTMLInputElement>) =>\r\n                      setFieldValue('amount', event.target.value)\r\n                    }\r\n                  />\r\n                  <label htmlFor={'category'} className=\"label category-label\">\r\n                    {t('DASHBOARD.ITEM_MODAL.CATEGORY')}\r\n                  </label>\r\n                  <DropdownButton title={values.category} id=\"dropdown\">\r\n                    {categories.map(\r\n                      (category: CostCategory | IncomeCategory, i: number) => (\r\n                        <Dropdown.Item\r\n                          eventKey={`${i}`}\r\n                          key={i}\r\n                          onSelect={() => {\r\n                            setFieldValue('category', categories[i]);\r\n                            validateForm();\r\n                          }}\r\n                        >\r\n                          {category}\r\n                        </Dropdown.Item>\r\n                      ),\r\n                    )}\r\n                  </DropdownButton>\r\n                  <label\r\n                    htmlFor={'description'}\r\n                    className=\"label description-label\"\r\n                  >\r\n                    {t('DASHBOARD.ITEM_MODAL.DESCRIPTION')}\r\n                  </label>\r\n                  <Field\r\n                    label={t('DASHBOARD.ITEM_MODAL.DESCRIPTION')}\r\n                    className={'description'}\r\n                    name={'description'}\r\n                    type={'text'}\r\n                    component={InputWrapper}\r\n                    autocomplete={'off'}\r\n                    onBlur={() => {\r\n                      setFieldTouched('description', true);\r\n                    }}\r\n                    setFieldValue={setFieldValue}\r\n                    onChange={(event: ChangeEvent<HTMLInputElement>) => {\r\n                      setFieldValue('description', event.target.value);\r\n                      if (\r\n                        event.target.value?.length > 1 &&\r\n                        descriptionMapping[event.target.value]\r\n                      ) {\r\n                        setFieldValue(\r\n                          'category',\r\n                          t(\r\n                            `COMMON.CATEGORIES.${\r\n                              descriptionMapping[event.target.value]\r\n                            }`,\r\n                          ),\r\n                        );\r\n                      }\r\n                    }}\r\n                  />\r\n                  <label htmlFor={'date'} className=\"label description-label\">\r\n                    {t('DASHBOARD.ITEM_MODAL.DATE')}\r\n                  </label>\r\n                  <div className=\"date-picker-container date-picker-in-modal\">\r\n                    <DatePickerWrapper\r\n                      date={new Date(values.date)}\r\n                      onChange={(date: Date) => setFieldValue('date', date)}\r\n                    />\r\n                  </div>\r\n                </Modal.Body>\r\n\r\n                <Modal.Footer className={'flex-nowrap'}>\r\n                  <Button onClick={hide} variant=\"secondary\">\r\n                    {t('COMMON.CANCEL')}\r\n                  </Button>\r\n                  <Button\r\n                    className=\"btn-primary\"\r\n                    type=\"submit\"\r\n                    disabled={!isValidForm}\r\n                  >\r\n                    {t('COMMON.OK')}\r\n                  </Button>\r\n                </Modal.Footer>\r\n              </Form>\r\n            );\r\n          }}\r\n        </Formik>\r\n      </Modal>\r\n\r\n      <ConfirmModal\r\n        shown={confirmModalShown}\r\n        onCancel={hideConfirmModal}\r\n        onConfirm={confirmDelete}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n};\r\n","import moment from 'moment';\r\n\r\nimport { Months } from 'common/Constants';\r\n\r\nexport const getMoneyString = (number: number): string =>\r\n  Math.round(number)\r\n    .toString()\r\n    .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ' ');\r\n\r\nexport const dayPagingAvailable = (date: Date) => ({\r\n  left: !moment(date).isSame(moment('2015-09-30'), 'day'),\r\n  right: !moment(date).isSame(moment(), 'day'),\r\n});\r\n\r\nexport const monthPagingAvailable = (date: Date) => {\r\n  const d = new Date(date.getFullYear(), date.getMonth(), 1);\r\n  const now = new Date();\r\n  return {\r\n    left: !moment(d).isSame(moment('2015-09-01'), 'day'),\r\n    right: !(\r\n      date.getFullYear() === now.getFullYear() &&\r\n      date.getMonth() === now.getMonth()\r\n    ),\r\n  };\r\n};\r\n\r\nexport const getFormattedDate = (date: Date) =>\r\n  date.getFullYear() +\r\n  '. ' +\r\n  Months[date.getMonth()] +\r\n  ' ' +\r\n  date.getDate() +\r\n  '.';\r\n\r\nconst canvas = document.createElement('canvas');\r\n\r\nexport const getTextWidth = (text: string, font: string) => {\r\n  const context = canvas.getContext('2d');\r\n  if (context) {\r\n    context.font = font;\r\n    const metrics = context.measureText(text);\r\n    return metrics.width;\r\n  }\r\n  return 0;\r\n};\r\n\r\nexport const getMaxTextWidth = (stringArray: string[], font: string) =>\r\n  Math.max(...stringArray.map((text) => getTextWidth(text, font)));\r\n\r\nexport const getMonthLabel = (year: number, month: number) =>\r\n  `${year}. ${Months[month]}`;\r\n","import React, { FC } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport { ModalType } from './Dashboard';\r\nimport './AddItemContainer.scss';\r\n\r\nexport interface AddItemContainerProps {\r\n  showItemModal: (\r\n    isCost: boolean,\r\n    modalType: ModalType,\r\n    currentItemId?: string,\r\n  ) => void;\r\n}\r\n\r\nexport const AddItemContainer: FC<AddItemContainerProps> = ({\r\n  showItemModal,\r\n}) => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <div className=\"add-item-container\">\r\n      <div\r\n        className=\"add-container add-cost-container\"\r\n        onClick={() => showItemModal(true, ModalType.ADD)}\r\n      >\r\n        <div className=\"add-icon add-cost-icon\" />\r\n        <div className=\"add-label add-cost-label\">{t('DASHBOARD.COST')}</div>\r\n      </div>\r\n      <div\r\n        className=\"add-container add-income-container\"\r\n        onClick={() => showItemModal(false, ModalType.ADD)}\r\n      >\r\n        <div className=\"add-label add-income-label\">\r\n          {t('DASHBOARD.INCOME')}\r\n        </div>\r\n        <div className=\"add-icon add-income-icon\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { FC } from 'react';\r\n\r\nimport { DatePickerWrapper } from 'components/datepicker/DatePickerWrapper';\r\nimport { PagingAvailable } from './Dashboard';\r\nimport './DatePickerContainer.scss';\r\n\r\ninterface DatePickerContainerProps {\r\n  isPagingAvailable: PagingAvailable;\r\n  changeDateWith: (withDay: number) => void;\r\n  onDateChange: (date: Date) => void;\r\n  date: Date;\r\n}\r\n\r\nexport const DatePickerContainer: FC<DatePickerContainerProps> = ({\r\n  isPagingAvailable,\r\n  changeDateWith,\r\n  onDateChange,\r\n  date,\r\n}) => {\r\n  return (\r\n    <div className=\"date-picker-container\">\r\n      {isPagingAvailable.left ? (\r\n        <div\r\n          className=\"paginate visible left\"\r\n          onClick={() => changeDateWith(-1)}\r\n        />\r\n      ) : (\r\n        <div className=\"paginate left\" />\r\n      )}\r\n      <DatePickerWrapper date={date} onChange={onDateChange} />\r\n      {isPagingAvailable.right ? (\r\n        <div\r\n          className=\"paginate visible right\"\r\n          onClick={() => changeDateWith(1)}\r\n        />\r\n      ) : (\r\n        <div className=\"paginate right\" />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { FC } from 'react';\r\n\r\nimport { ItemModel } from 'models/dashboard.model';\r\nimport { ModalType } from './Dashboard';\r\nimport { getMoneyString } from 'utils/util';\r\nimport { CategoryType } from 'models/common.model';\r\nimport 'styles/item-list.scss';\r\n\r\nexport interface ItemListProps {\r\n  items: ItemModel[];\r\n  showItemModal: (\r\n    isCost: boolean,\r\n    modalType: ModalType,\r\n    currentItemId?: string,\r\n  ) => void;\r\n}\r\n\r\nexport const ItemList: FC<ItemListProps> = ({ items, showItemModal }) => {\r\n  return (\r\n    <div className=\"item-list\">\r\n      {items.map(item => (\r\n        <div\r\n          className=\"item\"\r\n          key={items.indexOf(item)}\r\n          onClick={() =>\r\n            showItemModal(\r\n              item.category_type === CategoryType.Cost,\r\n              ModalType.UPDATE,\r\n              item._id,\r\n            )\r\n          }\r\n        >\r\n          <div className={`arrow-icon ${item.category_type.toLowerCase()}`} />\r\n          <div className=\"item-texts\">\r\n            <div className=\"amount\">{getMoneyString(item.amount)}</div>\r\n            <div className=\"description\">{item.description}</div>\r\n          </div>\r\n          <div className={`category-icon ${item.category.toLowerCase()}`} />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n","import React, { FC } from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport { ToggleState } from 'models/query.model';\r\nimport './ToggleButton.scss';\r\n\r\ninterface ToggleButtonProps {\r\n  active: ToggleState;\r\n  onClick: () => void;\r\n  leftText?: string;\r\n  rightText?: string;\r\n}\r\n\r\nenum Empty {\r\n  Left = 'left',\r\n  Right = 'right',\r\n  None = 'none',\r\n}\r\n\r\nexport const ToggleButton: FC<ToggleButtonProps> = ({\r\n  active,\r\n  onClick,\r\n  leftText,\r\n  rightText,\r\n}) => {\r\n  const emptyText = (): string =>\r\n    !leftText ? Empty.Left : !rightText ? Empty.Right : Empty.None;\r\n\r\n  return (\r\n    <div className=\"toggle-button-container\">\r\n      <div\r\n        className={classNames('button-container left', {\r\n          active: active === ToggleState.Left,\r\n          empty: emptyText() === Empty.Left,\r\n          'empty-other': emptyText() === Empty.Right,\r\n        })}\r\n        onClick={onClick}\r\n      >\r\n        <div\r\n          className={classNames('button left', {\r\n            active: active === ToggleState.Left,\r\n          })}\r\n        />\r\n        <div className=\"button-text left\">{leftText}</div>\r\n      </div>\r\n      <div\r\n        className={classNames('button-container right', {\r\n          active: active === ToggleState.Right,\r\n          empty: emptyText() === Empty.Right,\r\n          'empty-other': emptyText() === Empty.Left,\r\n        })}\r\n        onClick={onClick}\r\n      >\r\n        <div\r\n          className={classNames('button right', {\r\n            active: active === ToggleState.Right,\r\n          })}\r\n        />\r\n        <div className=\"button-text right\">{rightText}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { Component } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { WithTranslation, withTranslation } from 'react-i18next';\r\nimport classNames from 'classnames';\r\n\r\nimport { Months } from 'common/Constants';\r\nimport { compose } from 'utils/compose';\r\nimport { getMoneyString, monthPagingAvailable } from 'utils/util';\r\nimport { getStatsData } from 'store/stats';\r\nimport './Stats.scss';\r\n\r\nexport interface StatsPageProps\r\n  extends WithTranslation,\r\n    ConnectedProps<typeof connector> {\r\n  balance: number;\r\n  total_income: number;\r\n  total_cost: number;\r\n  balance_in_month: number;\r\n  daily_average: number;\r\n  daily_average_without_house: number;\r\n  expected_cost: number;\r\n  expected_balance_in_month: number;\r\n  expected_balance: number;\r\n}\r\n\r\nexport interface StatsPageState {\r\n  date: Date;\r\n  isPagingAvailable: {\r\n    left: boolean;\r\n    right: boolean;\r\n  };\r\n}\r\n\r\nclass Stats extends Component<StatsPageProps, StatsPageState> {\r\n  readonly state = {\r\n    date: new Date(),\r\n    isPagingAvailable: {\r\n      left: true,\r\n      right: false,\r\n    },\r\n  };\r\n\r\n  getData = async () => {\r\n    const { getStatsData } = this.props;\r\n    await getStatsData(this.state.date.toISOString());\r\n  };\r\n\r\n  changeMonthWith = async (value: number) => {\r\n    const { date } = this.state;\r\n    const d = date;\r\n    d.setMonth(date.getMonth() + value);\r\n    d.setDate(this.isThisMonth(d) ? new Date().getDate() : 28);\r\n    await this.setState({ date: d });\r\n    this.setPagingAvailable();\r\n    await this.getData();\r\n  };\r\n\r\n  isThisMonth = (date: Date) =>\r\n    date.getFullYear() === new Date().getFullYear() &&\r\n    date.getMonth() === new Date().getMonth();\r\n\r\n  setPagingAvailable = () => {\r\n    this.setState({\r\n      isPagingAvailable: monthPagingAvailable(this.state.date),\r\n    });\r\n  };\r\n\r\n  async componentDidMount() {\r\n    await this.getData();\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.stats) return null;\r\n    const {\r\n      stats: {\r\n        balance,\r\n        total_income,\r\n        total_cost,\r\n        balance_in_month,\r\n        daily_average,\r\n        daily_average_without_house,\r\n        expected_cost,\r\n        expected_balance_in_month,\r\n        expected_balance,\r\n      },\r\n      t,\r\n    } = this.props;\r\n    const { date, isPagingAvailable } = this.state;\r\n    return (\r\n      <div className=\"stats-container\">\r\n        {[\r\n          balance,\r\n          total_income,\r\n          total_cost,\r\n          balance_in_month,\r\n          daily_average,\r\n          daily_average_without_house,\r\n          expected_cost,\r\n          expected_balance_in_month,\r\n          expected_balance,\r\n        ].map((amount, i) => (\r\n          <div\r\n            className={classNames({\r\n              'green-item': i === 1,\r\n              'red-item': i === 2,\r\n            })}\r\n          >\r\n            <div className=\"stats-label\">{t(`STATS.LABELS.${i}`)}</div>\r\n            <div className=\"amount\">{getMoneyString(amount)}</div>\r\n          </div>\r\n        ))}\r\n\r\n        <div className=\"month-pager-container date-picker-container\">\r\n          <div\r\n            className={classNames('paginate left', {\r\n              visible: isPagingAvailable.left,\r\n            })}\r\n            onClick={() => isPagingAvailable.left && this.changeMonthWith(-1)}\r\n          />\r\n          <div className=\"month-pager\">\r\n            {`${date.getFullYear()}. ${Months[date.getMonth()]}`}\r\n          </div>\r\n          <div\r\n            className={classNames('paginate right', {\r\n              visible: isPagingAvailable.right,\r\n            })}\r\n            onClick={() => isPagingAvailable.right && this.changeMonthWith(1)}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: ApplicationState) => {\r\n  return {\r\n    stats: state.stats.data,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  getStatsData,\r\n};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport default compose(connector)(withTranslation()(Stats));\r\n","export interface ChartDataPoint {\r\n  [key: string]: number;\r\n}\r\n\r\nexport interface MappedDataPoint {\r\n  amount: number;\r\n  year: number;\r\n  month: number;\r\n  sumAmount?: number;\r\n}\r\n\r\nexport interface ChartParamsModel {\r\n  min_year?: number;\r\n  max_year?: number;\r\n  min_month?: number;\r\n  max_month?: number;\r\n  category_types?: string;\r\n  categories?: string;\r\n}\r\n\r\nexport interface ChartDataModel {\r\n  success: boolean;\r\n  result: {\r\n    BALANCE: ChartDataPoint[];\r\n    COST: ChartDataPoint[];\r\n    INCOME: ChartDataPoint[];\r\n    SALARY: ChartDataPoint[];\r\n    STATE: ChartDataPoint[];\r\n    GIFT: ChartDataPoint[];\r\n    LOAN: ChartDataPoint[];\r\n    OTHER: ChartDataPoint[];\r\n    BANK: ChartDataPoint[];\r\n    CAR: ChartDataPoint[];\r\n    CLOTHES: ChartDataPoint[];\r\n    DRINK: ChartDataPoint[];\r\n    FOOD: ChartDataPoint[];\r\n    GROCERY: ChartDataPoint[];\r\n    HOUSE: ChartDataPoint[];\r\n    INVESTMENT: ChartDataPoint[];\r\n    LUXURY: ChartDataPoint[];\r\n    OVERHEAD: ChartDataPoint[];\r\n    PHARMACY: ChartDataPoint[];\r\n    PHONE: ChartDataPoint[];\r\n    TRAVEL: ChartDataPoint[];\r\n    PREV_BALANCE: number;\r\n  };\r\n}\r\n\r\nexport enum ChartKey {\r\n  PrevBalance = 'prevBalance',\r\n  Income = 'income',\r\n  Cost = 'cost',\r\n  Balance = 'balance',\r\n}\r\n","import React, { ReactNode } from 'react';\r\nimport { Dropdown } from 'react-bootstrap';\r\n\r\nimport { Months, StartDate } from 'common/Constants';\r\n\r\nexport const getYearItems = (\r\n  onSelectYear: (year: number) => void,\r\n): ReactNode[] => {\r\n  const years = [];\r\n  for (let i = new Date().getFullYear(); i >= StartDate.getFullYear(); i--) {\r\n    years.push(i);\r\n  }\r\n  return years.map((year: number, i: number) => (\r\n    <Dropdown.Item\r\n      eventKey={`${i}`}\r\n      key={i}\r\n      onSelect={() => onSelectYear(year)}\r\n    >\r\n      {year}\r\n    </Dropdown.Item>\r\n  ));\r\n};\r\n\r\nexport const getMonths = (\r\n  onSelectMonth: (month: number) => void,\r\n  selectedYear: number,\r\n): ReactNode[] => {\r\n  return Months.map((month, i) => {\r\n    const now = new Date();\r\n    if (\r\n      (selectedYear === now.getFullYear() && i > now.getMonth()) ||\r\n      (selectedYear === 2015 && i < 8)\r\n    )\r\n      return null;\r\n    return (\r\n      <Dropdown.Item\r\n        eventKey={`${i}`}\r\n        key={i}\r\n        onSelect={() => onSelectMonth(i)}\r\n      >\r\n        {month}\r\n      </Dropdown.Item>\r\n    );\r\n  });\r\n};\r\n","import React, { FC } from 'react';\r\nimport { Button, Modal } from 'react-bootstrap';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport './Dialog.scss';\r\n\r\nexport interface DialogProps {\r\n  shown: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  className?: string;\r\n}\r\n\r\nexport const Dialog: FC<DialogProps> = ({\r\n  shown,\r\n  onClose,\r\n  title,\r\n  children,\r\n  className,\r\n}) => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <Modal className={`ok-modal ${className}`} show={shown} onClose={onClose}>\r\n      <Modal.Header>\r\n        <Modal.Title>{title}</Modal.Title>\r\n      </Modal.Header>\r\n\r\n      <Modal.Body>{children}</Modal.Body>\r\n\r\n      <Modal.Footer>\r\n        <Button variant=\"primary\" type=\"submit\" onClick={onClose}>\r\n          {t('COMMON.OK')}\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n};\r\n","import React, { FC } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport { Dialog, DialogProps } from 'components/dialog/Dialog';\r\nimport { getMoneyString } from 'utils/util';\r\n\r\nexport interface QuerySumDialogProps extends DialogProps {\r\n  value: number;\r\n}\r\n\r\nexport const QuerySumDialog: FC<QuerySumDialogProps> = ({\r\n  value,\r\n  onClose,\r\n  shown,\r\n  title,\r\n}) => {\r\n  const { t } = useTranslation();\r\n  return (\r\n    <Dialog shown={shown} onClose={onClose} title={title}>\r\n      {`${t('QUERY.AMOUNT')}: ${getMoneyString(value)}`}\r\n    </Dialog>\r\n  );\r\n};\r\n","import React, { FC } from 'react';\r\n\r\nimport { ListItemModel } from 'models/query.model';\r\nimport { Dialog, DialogProps } from 'components/dialog/Dialog';\r\nimport { getFormattedDate, getMoneyString } from 'utils/util';\r\n\r\nexport interface QueryListDialogProps extends DialogProps {\r\n  items: ListItemModel[];\r\n}\r\n\r\nexport const QueryListDialog: FC<QueryListDialogProps> = ({\r\n  title,\r\n  shown,\r\n  onClose,\r\n  items,\r\n}) => {\r\n  return (\r\n    <Dialog\r\n      className=\"item-list-modal\"\r\n      shown={shown}\r\n      title={title}\r\n      onClose={onClose}\r\n    >\r\n      <div className=\"item-list\">\r\n        {items.map((item) =>\r\n          item.type === 'header' ? (\r\n            <div className=\"cost-label\" key={items.indexOf(item)}>\r\n              {getFormattedDate(new Date(item.date))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"item\" key={items.indexOf(item)}>\r\n              <div\r\n                className={`arrow-icon ${item.category_type.toLowerCase()}`}\r\n              />\r\n              <div className=\"item-texts\">\r\n                <div className=\"amount\">{getMoneyString(item.amount)}</div>\r\n                <div className=\"description\">{item.description}</div>\r\n              </div>\r\n              <div className={`category-icon ${item.category.toLowerCase()}`} />\r\n            </div>\r\n          ),\r\n        )}\r\n      </div>\r\n    </Dialog>\r\n  );\r\n};\r\n","import React, { Component } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\r\nimport { Button, Dropdown, DropdownButton } from 'react-bootstrap';\r\nimport { withTranslation, WithTranslation } from 'react-i18next';\r\nimport { registerLocale } from 'react-datepicker';\r\nimport moment from 'moment';\r\nimport hu from 'date-fns/locale/hu';\r\n\r\nimport { compose } from 'utils/compose';\r\nimport { getMoneyString } from 'utils/util';\r\nimport { DatePickerWrapper } from 'components/datepicker/DatePickerWrapper';\r\nimport { ToggleButton } from 'components/togglebutton/ToggleButton';\r\nimport { getYearItems, getMonths } from 'components/dropdown/DropDownItems';\r\nimport { QuerySumDialog } from './QuerySumDialog';\r\nimport { QueryListDialog } from './QueryListDialog';\r\nimport { getQueryData, getQueryList } from 'store/query';\r\nimport {\r\n  CostCategories,\r\n  CostCategoriesWithEmpty,\r\n  IncomeCategories,\r\n  IncomeCategoriesWithEmpty,\r\n  Months,\r\n} from 'common/Constants';\r\nimport {\r\n  CategoryType,\r\n  Collection,\r\n  CostCategory,\r\n  IncomeCategory,\r\n} from 'models/common.model';\r\nimport { QueryParamsModel, ToggleState } from 'models/query.model';\r\nimport 'styles/dropdown.scss';\r\nimport './Query.scss';\r\n\r\nexport interface QueryPageProps\r\n  extends WithTranslation,\r\n    RouteComponentProps,\r\n    ConnectedProps<typeof connector> {}\r\n\r\nexport interface QueryPageState {\r\n  activeCollectionToggle: ToggleState;\r\n  activeCategoryTypeToggle: ToggleState;\r\n  activeExclusionToggle: ToggleState;\r\n  selectedCategoryIndex: number;\r\n  description: string;\r\n  activeFullMatchToggle: ToggleState;\r\n  minAmount: string;\r\n  maxAmount: string;\r\n  minDate: Date | null;\r\n  maxDate: Date | null;\r\n  selectedYear: number;\r\n  selectedMonthIndex: number;\r\n  sumModalShown: boolean;\r\n  listModalShown: boolean;\r\n}\r\n\r\nclass Query extends Component<QueryPageProps, QueryPageState> {\r\n  state = {\r\n    activeCollectionToggle: ToggleState.Left,\r\n    activeCategoryTypeToggle: ToggleState.Left,\r\n    activeExclusionToggle: ToggleState.Left,\r\n    selectedCategoryIndex: 0,\r\n    description: '',\r\n    activeFullMatchToggle: ToggleState.Right,\r\n    minAmount: '',\r\n    maxAmount: '',\r\n    minDate: null,\r\n    maxDate: null,\r\n    selectedYear: new Date().getFullYear(),\r\n    selectedMonthIndex: new Date().getMonth(),\r\n    sumModalShown: false,\r\n    listModalShown: false,\r\n  };\r\n\r\n  getParams = () => {\r\n    const { t } = this.props;\r\n    const {\r\n      activeCollectionToggle,\r\n      activeCategoryTypeToggle,\r\n      selectedCategoryIndex,\r\n      activeExclusionToggle,\r\n      description,\r\n      activeFullMatchToggle,\r\n      minAmount,\r\n      maxAmount,\r\n      minDate,\r\n      maxDate,\r\n      selectedYear,\r\n      selectedMonthIndex,\r\n    } = this.state;\r\n\r\n    let params: QueryParamsModel = {\r\n      collection:\r\n        activeCollectionToggle === ToggleState.Left\r\n          ? Collection.Item\r\n          : Collection.Balance,\r\n      category_type:\r\n        activeCategoryTypeToggle === ToggleState.Left\r\n          ? CategoryType.Cost\r\n          : CategoryType.Income,\r\n    };\r\n\r\n    if (params.collection === Collection.Item) {\r\n      if (selectedCategoryIndex) {\r\n        params.category = t(\r\n          `COMMON.ENGLISH_CATEGORIES.${\r\n            activeCategoryTypeToggle === ToggleState.Left\r\n              ? CostCategoriesWithEmpty[selectedCategoryIndex]\r\n              : IncomeCategoriesWithEmpty[selectedCategoryIndex]\r\n          }`,\r\n        );\r\n        if (activeExclusionToggle === ToggleState.Right) {\r\n          params.exclude_category = true;\r\n        }\r\n      }\r\n      if (description) {\r\n        params.description = description;\r\n        params.description_like = activeFullMatchToggle === ToggleState.Left;\r\n      }\r\n      if (minAmount) {\r\n        params.min_amount = +minAmount;\r\n      }\r\n      if (maxAmount) {\r\n        params.max_amount = +maxAmount;\r\n      }\r\n      if (minDate) {\r\n        const min: Date = minDate || new Date();\r\n        min.setHours(2);\r\n        params.min_date = min;\r\n      }\r\n      if (maxDate) {\r\n        const max: Date = maxDate || new Date();\r\n        max.setHours(25);\r\n        max.setMinutes(59);\r\n        params.max_date = max;\r\n      }\r\n    } else {\r\n      params.year = selectedYear;\r\n      params.month = selectedMonthIndex;\r\n    }\r\n    return params;\r\n  };\r\n\r\n  switchActiveCollectionToggle = async () => {\r\n    const { activeCollectionToggle } = this.state;\r\n    this.setState(\r\n      {\r\n        activeCollectionToggle:\r\n          activeCollectionToggle === ToggleState.Left\r\n            ? ToggleState.Right\r\n            : ToggleState.Left,\r\n      },\r\n      () => activeCollectionToggle === ToggleState.Right && this.getSum(),\r\n    );\r\n  };\r\n\r\n  switchActiveCategoryTypeToggle = () => {\r\n    this.setState({\r\n      activeCategoryTypeToggle:\r\n        this.state.activeCategoryTypeToggle === ToggleState.Left\r\n          ? ToggleState.Right\r\n          : ToggleState.Left,\r\n    });\r\n  };\r\n  switchActiveExclusionToggle = () => {\r\n    this.setState({\r\n      activeExclusionToggle:\r\n        this.state.activeExclusionToggle === ToggleState.Left\r\n          ? ToggleState.Right\r\n          : ToggleState.Left,\r\n    });\r\n  };\r\n\r\n  getMenuItems = (array: (CostCategory | IncomeCategory | '')[]) =>\r\n    array.map((category, i) => (\r\n      <Dropdown.Item\r\n        eventKey={`${i}`}\r\n        key={i}\r\n        onSelect={() => this.onSelectCategory(i)}\r\n      >\r\n        {category}\r\n      </Dropdown.Item>\r\n    ));\r\n\r\n  onSelectCategory = (index: number) => {\r\n    this.setState({ selectedCategoryIndex: index });\r\n  };\r\n\r\n  onSelectYear = async (year: number) => {\r\n    const { selectedMonthIndex } = this.state;\r\n    let month = selectedMonthIndex;\r\n    const now = new Date();\r\n    if (year === now.getFullYear() && selectedMonthIndex > now.getMonth()) {\r\n      month = now.getMonth();\r\n    }\r\n    if (year === 2015 && selectedMonthIndex < 8) {\r\n      month = 8;\r\n    }\r\n    this.setState({ selectedYear: year, selectedMonthIndex: month }, () =>\r\n      this.getSum(),\r\n    );\r\n  };\r\n\r\n  onSelectMonth = async (index: number) => {\r\n    this.setState({ selectedMonthIndex: index }, () => this.getSum);\r\n  };\r\n\r\n  onDescriptionChange = (description: string) => {\r\n    this.setState({ description });\r\n  };\r\n\r\n  switchActiveFullMatchToggle = () => {\r\n    this.setState({\r\n      activeFullMatchToggle:\r\n        this.state.activeFullMatchToggle === ToggleState.Left\r\n          ? ToggleState.Right\r\n          : ToggleState.Left,\r\n    });\r\n  };\r\n\r\n  onMinAmountChange = (amount: string) => {\r\n    this.setState({ minAmount: amount });\r\n  };\r\n\r\n  onMaxAmountChange = (amount: string) => {\r\n    this.setState({ maxAmount: amount });\r\n  };\r\n\r\n  onMinDateChange = (date: Date | null) => {\r\n    if (date && moment(date).isAfter(moment(this.state.maxDate), 'day')) {\r\n      this.setState({ maxDate: null });\r\n    }\r\n    date\r\n      ? this.setState({ minDate: new Date(date) })\r\n      : this.setState({ minDate: null });\r\n  };\r\n\r\n  onMaxDateChange = (date: Date | null) => {\r\n    if (date && moment(date).isBefore(moment(this.state.minDate), 'day')) {\r\n      this.setState({ minDate: null });\r\n    }\r\n    date\r\n      ? this.setState({ maxDate: new Date(date) })\r\n      : this.setState({ maxDate: null });\r\n  };\r\n\r\n  isInvalidInput = () =>\r\n    (this.state.minAmount.trim() &&\r\n      this.state.minAmount.trim().toString().replace(/\\d/g, '').length) ||\r\n    (this.state.maxAmount.trim() &&\r\n      this.state.maxAmount.trim().toString().replace(/\\d/g, '').length);\r\n\r\n  getSum = async () => {\r\n    const { getQueryData } = this.props;\r\n    await getQueryData(this.getParams());\r\n    this.state.activeCollectionToggle === ToggleState.Left &&\r\n      this.setState({ sumModalShown: true });\r\n  };\r\n\r\n  getList = async () => {\r\n    await this.props.getQueryList(this.getParams());\r\n    this.state.activeCollectionToggle === ToggleState.Left &&\r\n      this.setState({ listModalShown: true });\r\n  };\r\n\r\n  hideSumModal = () => {\r\n    this.setState({ sumModalShown: false });\r\n  };\r\n\r\n  hideListModal = () => {\r\n    this.setState({ listModalShown: false });\r\n  };\r\n\r\n  componentDidMount() {\r\n    registerLocale('hu', hu);\r\n  }\r\n\r\n  render() {\r\n    const { t, queryData, queryList } = this.props;\r\n    const {\r\n      activeCollectionToggle,\r\n      activeCategoryTypeToggle,\r\n      activeExclusionToggle,\r\n      activeFullMatchToggle,\r\n      selectedCategoryIndex,\r\n      description,\r\n      minAmount,\r\n      maxAmount,\r\n      minDate,\r\n      maxDate,\r\n      sumModalShown,\r\n      listModalShown,\r\n      selectedYear,\r\n      selectedMonthIndex,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"query\">\r\n        <div className=\"collection\">\r\n          <div className=\"cost-label\">{t('QUERY.LABELS.QUERY_TYPE')}</div>\r\n          <ToggleButton\r\n            active={activeCollectionToggle}\r\n            onClick={this.switchActiveCollectionToggle}\r\n            leftText={t('QUERY.ITEM')}\r\n            rightText={t('QUERY.BALANCE')}\r\n          />\r\n        </div>\r\n        {activeCollectionToggle === ToggleState.Left ? (\r\n          <div className=\"item\">\r\n            <div className=\"category-type\">\r\n              <div className=\"cost-label\">\r\n                {t('QUERY.LABELS.CATEGORY_TYPE')}\r\n              </div>\r\n              <ToggleButton\r\n                active={activeCategoryTypeToggle}\r\n                onClick={this.switchActiveCategoryTypeToggle}\r\n                leftText={t('QUERY.COST')}\r\n                rightText={t('QUERY.INCOME')}\r\n              />\r\n            </div>\r\n            <div className=\"category\">\r\n              <div className=\"cost-label\">{t('QUERY.LABELS.CATEGORY')}</div>\r\n              <div className=\"category-toggle-container\">\r\n                <div className=\"negate\">\r\n                  <ToggleButton\r\n                    active={activeExclusionToggle}\r\n                    onClick={this.switchActiveExclusionToggle}\r\n                    leftText=\"\"\r\n                    rightText=\"Nem\"\r\n                  />\r\n                </div>\r\n                <div className=\"category\">\r\n                  <DropdownButton\r\n                    title={\r\n                      activeCategoryTypeToggle === ToggleState.Left\r\n                        ? CostCategoriesWithEmpty[selectedCategoryIndex]\r\n                        : IncomeCategoriesWithEmpty[selectedCategoryIndex]\r\n                    }\r\n                  >\r\n                    {this.getMenuItems(\r\n                      activeCategoryTypeToggle === ToggleState.Left\r\n                        ? ['', ...(CostCategories as CostCategory[])]\r\n                        : ['', ...(IncomeCategories as IncomeCategory[])],\r\n                    )}\r\n                  </DropdownButton>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"description-container-panel\">\r\n              <div className=\"description-container\">\r\n                <div className=\"cost-label\">\r\n                  {t('QUERY.LABELS.DESCRIPTION')}\r\n                </div>\r\n                <input\r\n                  className=\"description\"\r\n                  value={description}\r\n                  onChange={(e) => this.onDescriptionChange(e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"full-match-container\">\r\n                <div className=\"cost-label\">{t('QUERY.LABELS.FULL_MATCH')}</div>\r\n                <ToggleButton\r\n                  active={activeFullMatchToggle}\r\n                  onClick={this.switchActiveFullMatchToggle}\r\n                  leftText={t('QUERY.LABELS.NO')}\r\n                  rightText={t('QUERY.LABELS.YES')}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"amount-container\">\r\n              <div className=\"minimal-amount-container\">\r\n                <div className=\"cost-label\">{t('QUERY.LABELS.MIN_AMOUNT')}</div>\r\n                <input\r\n                  className=\"minimal-amount amount\"\r\n                  value={minAmount}\r\n                  type=\"number\"\r\n                  onChange={(e) => this.onMinAmountChange(e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"maximal-amount-container\">\r\n                <div className=\"cost-label\">{t('QUERY.LABELS.MAX_AMOUNT')}</div>\r\n                <input\r\n                  className=\"maximal-amount amount\"\r\n                  value={maxAmount}\r\n                  type=\"number\"\r\n                  onChange={(e) => this.onMaxAmountChange(e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"date-container\">\r\n              <div className=\"minimal-date-container\">\r\n                <div className=\"cost-label\">{t('QUERY.LABELS.FROM')}</div>\r\n                <div className=\"minimal-date date date-picker-container\">\r\n                  <DatePickerWrapper\r\n                    date={minDate || null}\r\n                    onChange={this.onMinDateChange}\r\n                  />\r\n                  {this.state.minDate ? (\r\n                    <div\r\n                      className=\"close-icon\"\r\n                      onClick={() => this.onMinDateChange(null)}\r\n                    />\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n              <div className=\"maximal-date-container\">\r\n                <div className=\"cost-label\">{t('QUERY.LABELS.TO')}</div>\r\n                <div className=\"maximal-date date date-picker-container\">\r\n                  <DatePickerWrapper\r\n                    date={maxDate || null}\r\n                    onChange={this.onMaxDateChange}\r\n                  />\r\n                  {maxDate ? (\r\n                    <div\r\n                      className=\"close-icon\"\r\n                      onClick={() => this.onMaxDateChange(null)}\r\n                    />\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"button-container\">\r\n              <Button\r\n                className=\"query-sum\"\r\n                type=\"submit\"\r\n                onClick={this.getSum}\r\n                disabled={!!this.isInvalidInput()}\r\n              >\r\n                {t('QUERY.LABELS.SUM')}\r\n              </Button>\r\n              <Button\r\n                className=\"query-list\"\r\n                type=\"submit\"\r\n                onClick={this.getList}\r\n                disabled={!!this.isInvalidInput()}\r\n              >\r\n                {t('QUERY.LABELS.LIST')}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"balance\">\r\n            <div className=\"year\">\r\n              <div className=\"cost-label\">{t('QUERY.YEAR')}</div>\r\n              <DropdownButton title={selectedYear} id=\"year-dropdown\">\r\n                {getYearItems(this.onSelectYear)}\r\n              </DropdownButton>\r\n            </div>\r\n            <div className=\"month\">\r\n              <div className=\"cost-label\">{t('QUERY.MONTH')}</div>\r\n              <DropdownButton\r\n                title={Months[selectedMonthIndex]}\r\n                id=\"month-dropdown\"\r\n              >\r\n                {getMonths(this.onSelectMonth, selectedYear)}\r\n              </DropdownButton>\r\n            </div>\r\n            <div className=\"result-container\">\r\n              <div className=\"cost-label\">{t('QUERY.BALANCE')}</div>\r\n              <div className=\"result\">\r\n                {queryData ? getMoneyString(queryData.value) : ''}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        <QuerySumDialog\r\n          title={t('QUERY.MODAL_TITLE')}\r\n          shown={sumModalShown}\r\n          onClose={this.hideSumModal}\r\n          value={queryData?.value || 0}\r\n        />\r\n        <QueryListDialog\r\n          title={t('QUERY.MODAL_TITLE')}\r\n          shown={listModalShown}\r\n          onClose={this.hideListModal}\r\n          items={queryList?.items || []}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: ApplicationState) => {\r\n  return {\r\n    queryData: state.query.queryData,\r\n    queryList: state.query.queryList,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  getQueryData,\r\n  getQueryList,\r\n};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport default compose(connector)(withRouter(withTranslation()(Query)));\r\n","import React, { MouseEvent, FC } from 'react';\r\n\r\nimport './Checkbox.scss';\r\n\r\nexport interface CheckboxProps {\r\n  index: number;\r\n  className?: string;\r\n  isChecked: boolean;\r\n  setChecked: (index?: number) => void;\r\n  text: string;\r\n}\r\n\r\nconst Checkbox: FC<CheckboxProps> = ({\r\n  index,\r\n  className,\r\n  isChecked,\r\n  setChecked,\r\n  text,\r\n}) => {\r\n  return (\r\n    <div\r\n      className={className}\r\n      onClick={(event: MouseEvent<HTMLElement>) => {\r\n        event.preventDefault();\r\n        setChecked(index);\r\n      }}\r\n    >\r\n      <label>\r\n        <input type=\"checkbox\" />\r\n        <div className={`tick ${isChecked ? 'checked' : ''}`} />\r\n        {text}\r\n      </label>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkbox;\r\n","import React, { Component } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { compose } from 'redux';\r\nimport { withTranslation, WithTranslation } from 'react-i18next';\r\nimport { easeLinear, select } from 'd3';\r\nimport { scaleBand, scaleLinear } from 'd3-scale';\r\nimport { axisBottom, axisLeft } from 'd3-axis';\r\n\r\nimport { BarChartAnimationLength, Colors } from 'common/Constants';\r\nimport { getMaxTextWidth, getMoneyString } from 'utils/util';\r\nimport './BarChart.scss';\r\n\r\nexport interface BarChartProps\r\n  extends WithTranslation,\r\n    ConnectedProps<typeof connector> {\r\n  setSize: () => void;\r\n  isLarge: boolean;\r\n}\r\n\r\nexport interface DataPoint {\r\n  label: string;\r\n  value: number;\r\n}\r\n\r\nexport const nonVisualizibleData = ['prevBalance', 'error', 'loading'];\r\n\r\nclass BarChart extends Component<BarChartProps> {\r\n  domNode = null;\r\n  height = 0;\r\n  width = 0;\r\n  data: Array<DataPoint> = [];\r\n  selection: any;\r\n  node: any;\r\n\r\n  componentDidMount() {\r\n    const values: Array<number> = [];\r\n    const labels: Array<string> = [];\r\n    const { chart, t } = this.props;\r\n    for (let key in chart) {\r\n      if (\r\n        chart.hasOwnProperty(key) &&\r\n        // @ts-ignore\r\n        chart[key] &&\r\n        !nonVisualizibleData.includes(key)\r\n      ) {\r\n        values.push(\r\n          // @ts-ignore\r\n          chart[key].length === 1\r\n            ? // @ts-ignore\r\n              chart[key][0].amount\r\n            : // @ts-ignore\r\n              chart[key].reduce((prev, next) => {\r\n                return (\r\n                  (prev.amount || prev.amount === 0 ? prev.amount : prev) +\r\n                  next.amount\r\n                );\r\n              }, 0),\r\n        );\r\n        labels.push(t(`COMMON.CATEGORIES.${key}`));\r\n      }\r\n    }\r\n    this.data = values.map((value, i) => {\r\n      return { value, label: labels[i] };\r\n    });\r\n    window.addEventListener('resize', this.resize);\r\n    setTimeout(this.draw, 500);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.resize);\r\n  }\r\n\r\n  resize = () => {\r\n    this.props.setSize();\r\n    this.draw();\r\n  };\r\n\r\n  draw = () => {\r\n    const svgSelection: any = select('svg');\r\n    if (\r\n      svgSelection._groups &&\r\n      svgSelection._groups[0] &&\r\n      svgSelection._groups[0][0]\r\n    ) {\r\n      select('svg').remove();\r\n    }\r\n    this.selection = select(this.node);\r\n    this.domNode = this.selection.node();\r\n    const node = select(this.domNode);\r\n\r\n    const margin = {\r\n      top: 30,\r\n      right: 20,\r\n      bottom:\r\n        getMaxTextWidth(\r\n          this.data.map((d) => d.label),\r\n          'normal 12px JmhTypewriter',\r\n        ) + 10,\r\n      left: 80,\r\n    };\r\n    let isHorizontalLabels = false;\r\n\r\n    this.width = isNaN(parseInt(node.style('width'), 10))\r\n      // @ts-ignore\r\n      ? (node._groups && node._groups[0] && node._groups[0][0])\r\n        // @ts-ignore\r\n        ? node._groups[0][0].offsetWidth - margin.left - margin.right\r\n        : this.props.isLarge\r\n        ? window.innerWidth * 0.8 - margin.left - margin.right\r\n        : Math.min(366, window.innerWidth - margin.left - margin.right)\r\n      : parseInt(node.style('width'), 10) - margin.left - margin.right;\r\n\r\n    const barPadding = 20;\r\n    const barWidth = (this.width - barPadding) / this.data.length;\r\n\r\n    if (margin.bottom < barWidth) {\r\n      isHorizontalLabels = true;\r\n      margin.bottom = 30;\r\n    }\r\n\r\n    this.height = (this.props.isLarge ? 500 : 300) - margin.top - margin.bottom;\r\n\r\n    const x = scaleBand().rangeRound([0, this.width]).padding(0.1);\r\n    const y = scaleLinear().rangeRound([this.height, 0]);\r\n\r\n    const svg = this.selection.append('svg').attr('class', 'bar-chart');\r\n\r\n    svg\r\n      .attr('width', this.width + margin.left + margin.right)\r\n      .attr('height', this.height + margin.top + margin.bottom);\r\n\r\n    // axes' data\r\n    x.domain(this.data.map((d) => d.label));\r\n    y.domain([0, Math.max(...this.data.map((data) => Math.abs(data.value)))]);\r\n\r\n    // the main group\r\n    const g = svg\r\n      .append('g')\r\n      .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\r\n\r\n    // axis x\r\n    g.append('g')\r\n      .attr('class', 'axis axis--x')\r\n      .attr('transform', 'translate(0,' + this.height + ')')\r\n      .call(axisBottom(x))\r\n      .selectAll('text')\r\n      .style('text-anchor', 'end')\r\n      .style('fill', Colors.costBlue)\r\n      .style('stroke', 'none')\r\n      .attr('class', 'label-text')\r\n      .attr('dx', isHorizontalLabels ? 0 : '-.8em')\r\n      .attr('dy', isHorizontalLabels ? '.9em' : '-.55em');\r\n\r\n    // axis-x labels\r\n    g.selectAll('.label-text')\r\n      .nodes()\r\n      .forEach((node: SVGTextContentElement) => {\r\n        select(node).attr('transform', () =>\r\n          isHorizontalLabels\r\n            ? 'translate(' + node.getComputedTextLength() / 2 + ', 0)'\r\n            : 'rotate(-90)',\r\n        );\r\n      });\r\n\r\n    // axis-y\r\n    g.append('g').attr('class', 'axis axis--y').call(axisLeft(y).ticks(5));\r\n\r\n    // bars\r\n    g.selectAll('.bar')\r\n      .data(this.data)\r\n      .enter()\r\n      .append('rect')\r\n      .style('fill', (d: DataPoint) =>\r\n        d.value >= 0\r\n          ? d.label === 'Egyenleg'\r\n            ? Colors.costGreen\r\n            : Colors.costBlue\r\n          : Colors.costRed,\r\n      )\r\n      .style('stroke', 'none')\r\n      .attr('class', 'bar')\r\n      .attr('width', barWidth - barPadding)\r\n      .attr('y', this.height - 1)\r\n      .attr(\r\n        'transform',\r\n        (d: DataPoint, i: number) =>\r\n          'translate(' + [barWidth * i + barPadding, 0] + ')',\r\n      )\r\n      .transition()\r\n      .duration(BarChartAnimationLength)\r\n      .ease(easeLinear)\r\n      .attr('y', (d: DataPoint) => y(Math.abs(d.value)))\r\n      .attr('height', (d: DataPoint) => this.height - y(Math.abs(d.value)));\r\n\r\n    setTimeout(() => {\r\n      // amount-text\r\n      g.selectAll('.amount-text')\r\n        .data(this.data)\r\n        .enter()\r\n        .append('text')\r\n        .text((d: DataPoint) => getMoneyString(d.value))\r\n        .style('fill', (d: DataPoint) =>\r\n          d.value >= 0\r\n            ? d.label === 'Egyenleg'\r\n              ? Colors.costGreen\r\n              : Colors.costBlue\r\n            : Colors.costRed,\r\n        )\r\n        .attr('class', 'amount-text')\r\n        .attr('x', (d: DataPoint, i: number) => i * barWidth + barPadding)\r\n        .attr('y', (d: DataPoint) => y(Math.abs(d.value)) - 5)\r\n        .style('opacity', 0)\r\n        .transition()\r\n        .duration(200)\r\n        .ease(easeLinear)\r\n        .style('opacity', 1);\r\n\r\n      // centering amount-text\r\n      g.selectAll('.amount-text')\r\n        .nodes()\r\n        .forEach((node: SVGTextContentElement) => {\r\n          select(node).attr(\r\n            'transform',\r\n            () =>\r\n              'translate(' +\r\n              (barWidth - barPadding - node.getComputedTextLength()) / 2 +\r\n              ', 0)',\r\n          );\r\n        });\r\n    }, BarChartAnimationLength - 100);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`bar-chart-container ${this.props.isLarge ? '' : 'small'}`}\r\n        ref={(r) => (this.node = r)}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: ApplicationState) => {\r\n  return {\r\n    chart: state.chart,\r\n  };\r\n};\r\n\r\nconst connector = connect(mapStateToProps, {});\r\n\r\nexport default compose(connector)(withTranslation()(BarChart));\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport BarChart from './BarChart';\r\nimport { Dialog, DialogProps } from 'components/dialog/Dialog';\r\n\r\nexport interface BarChartModalProps extends DialogProps {\r\n  numberOfBars: number;\r\n}\r\n\r\nexport const BarChartModal: FC<BarChartModalProps> = ({\r\n  numberOfBars,\r\n  shown,\r\n  title,\r\n  onClose,\r\n}) => {\r\n  const [isLarge, setLarge] = useState<boolean>(\r\n    window.innerWidth >= 992 && numberOfBars > 3,\r\n  );\r\n\r\n  const handleResize = () => {\r\n    setLarge(window.innerWidth >= 992 && numberOfBars > 3);\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('resize', handleResize);\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    handleResize();\r\n  }, [numberOfBars]);\r\n\r\n  return (\r\n    <Dialog\r\n      shown={shown}\r\n      title={title}\r\n      className={classNames('bar-chart-modal', { small: !isLarge })}\r\n      onClose={onClose}\r\n    >\r\n      <BarChart isLarge={isLarge} setSize={handleResize} />\r\n    </Dialog>\r\n  );\r\n};\r\n","import React, { Component } from 'react';\r\nimport { Button, DropdownButton } from 'react-bootstrap';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { compose } from 'redux';\r\nimport { withTranslation, WithTranslation } from 'react-i18next';\r\nimport classNames from 'classnames';\r\n\r\nimport { ToggleButton } from 'components/togglebutton/ToggleButton';\r\nimport Checkbox from 'components/checkbox/Checkbox';\r\nimport { BarChartModal } from './BarChartModal';\r\nimport { LineChartModal } from './LineChartModal';\r\nimport { CategoryCheckboxes, Months } from 'common/Constants';\r\nimport { ChartParamsModel } from 'models/chart.model';\r\nimport { ToggleState } from 'models/query.model';\r\nimport { getMonths, getYearItems } from 'components/dropdown/DropDownItems';\r\nimport { getChartData } from 'store/chart';\r\nimport './Charts.scss';\r\n\r\nexport interface ChartProps\r\n  extends WithTranslation,\r\n    ConnectedProps<typeof connector> {}\r\n\r\nexport interface ChartState {\r\n  intervalType: IntervalType;\r\n  selectedYear: number;\r\n  selectedMonthIndex: number;\r\n  activeChartTypeToggle: ToggleState;\r\n  categories: Array<boolean>;\r\n  sumChecked: boolean;\r\n  isButtonDisabled: boolean;\r\n  isBarChartShown: boolean;\r\n  isLineChartShown: boolean;\r\n}\r\n\r\nexport enum IntervalType {\r\n  Month = 'month',\r\n  Year = 'year',\r\n  Full = 'full',\r\n}\r\n\r\nclass Charts extends Component<ChartProps, ChartState> {\r\n  state = {\r\n    intervalType: IntervalType.Month,\r\n    selectedYear: new Date().getFullYear(),\r\n    selectedMonthIndex: new Date().getMonth(),\r\n    activeChartTypeToggle: ToggleState.Left,\r\n    categories: new Array(CategoryCheckboxes.length).fill(false),\r\n    sumChecked: false,\r\n    isButtonDisabled: true,\r\n    isBarChartShown: false,\r\n    isLineChartShown: false,\r\n  };\r\n\r\n  getParams = () => {\r\n    const params: ChartParamsModel = {};\r\n    const { selectedMonthIndex, selectedYear } = this.state;\r\n    switch (this.state.intervalType) {\r\n      case IntervalType.Month:\r\n        params.min_month = selectedMonthIndex;\r\n        params.max_month = selectedMonthIndex;\r\n        params.min_year = selectedYear;\r\n        params.max_year = selectedYear;\r\n        break;\r\n      case IntervalType.Year:\r\n        params.min_year = selectedYear;\r\n        params.max_year = selectedYear;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    params.category_types = this.getCategoryTypesParam();\r\n    params.categories = this.getCategoriesParam();\r\n    return params;\r\n  };\r\n\r\n  getCategoriesParam = () => {\r\n    const { t } = this.props;\r\n    const { categories } = this.state;\r\n    return CategoryCheckboxes.slice(3)\r\n      .reduce(\r\n        (prev, next) =>\r\n          (prev === CategoryCheckboxes[3]\r\n            ? categories[3]\r\n              ? t(`COMMON.ENGLISH_CATEGORIES.${prev}`) + ','\r\n              : ''\r\n            : prev) +\r\n          (categories[CategoryCheckboxes.indexOf(next)]\r\n            ? t(`COMMON.ENGLISH_CATEGORIES.${next}`) + ','\r\n            : ''),\r\n      )\r\n      .slice(0, -1);\r\n  };\r\n\r\n  getCategoryTypesParam = () => {\r\n    const { t } = this.props;\r\n    let categoryTypes = '';\r\n    for (let i = 0; i < 3; i++) {\r\n      if (this.state.categories[i]) {\r\n        categoryTypes +=\r\n          t(`COMMON.ENGLISH_CATEGORIES.${CategoryCheckboxes[i]}`) + ',';\r\n      }\r\n    }\r\n    return categoryTypes.slice(0, -1);\r\n  };\r\n\r\n  isButtonDisabled = () => {\r\n    const checked = this.getNumberOfCheckedCategories();\r\n    return (\r\n      checked === 0 ||\r\n      (this.state.activeChartTypeToggle === ToggleState.Right && checked > 8)\r\n    );\r\n  };\r\n\r\n  getNumberOfCheckedCategories = () =>\r\n    this.state.categories.reduce((prev, next) => +prev + +next);\r\n\r\n  setChecked = (index?: number) => {\r\n    if (!!index || index === 0) {\r\n      const categories = this.state.categories;\r\n      categories[index] = !categories[index];\r\n      this.setState({\r\n        categories: categories,\r\n        isButtonDisabled: this.isButtonDisabled(),\r\n      });\r\n    }\r\n  };\r\n\r\n  setSumChecked = () => {\r\n    this.setState({ sumChecked: !this.state.sumChecked });\r\n  };\r\n\r\n  getCheckboxes = () => {\r\n    const { categories, activeChartTypeToggle, sumChecked } = this.state;\r\n    return CategoryCheckboxes.map((text: string) => {\r\n      return (\r\n        <div\r\n          className=\"checkbox-parent col-xl-2 col-lg-3 col-md-4 col-sm-4 col-xs-6\"\r\n          key={CategoryCheckboxes.indexOf(text)}\r\n        >\r\n          <Checkbox\r\n            index={CategoryCheckboxes.indexOf(text)}\r\n            className=\"checkbox\"\r\n            isChecked={categories[CategoryCheckboxes.indexOf(text)]}\r\n            setChecked={this.setChecked}\r\n            text={text}\r\n          />\r\n          {text === 'Egyenleg' &&\r\n          activeChartTypeToggle === ToggleState.Right ? (\r\n            <div className=\"sumbox-container\">\r\n              <span>(&Sigma;</span>\r\n              <Checkbox\r\n                index={-1}\r\n                text=\"\"\r\n                isChecked={sumChecked}\r\n                className=\"checkbox sumbox\"\r\n                setChecked={this.setSumChecked}\r\n              />\r\n              <span>)</span>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      );\r\n    });\r\n  };\r\n\r\n  onRadioButtonClick = (active: IntervalType) => {\r\n    this.setState({ intervalType: active });\r\n  };\r\n\r\n  onSelectYear = async (year: number) => {\r\n    let month = this.state.selectedMonthIndex;\r\n    const now = new Date();\r\n    if (\r\n      year === now.getFullYear() &&\r\n      this.state.selectedMonthIndex > now.getMonth()\r\n    ) {\r\n      month = now.getMonth();\r\n    }\r\n    if (year === 2015 && this.state.selectedMonthIndex < 8) {\r\n      month = 8;\r\n    }\r\n    await this.setState({ selectedYear: year, selectedMonthIndex: month });\r\n  };\r\n\r\n  onSelectMonth = async (index: number) => {\r\n    await this.setState({ selectedMonthIndex: index });\r\n  };\r\n\r\n  switchChartType = () => {\r\n    this.setState({\r\n      activeChartTypeToggle:\r\n        this.state.activeChartTypeToggle === ToggleState.Left\r\n          ? ToggleState.Right\r\n          : ToggleState.Left,\r\n    });\r\n  };\r\n\r\n  getChartData = async () => {\r\n    await this.props.getChartData(this.getParams());\r\n    if (\r\n      this.state.intervalType !== IntervalType.Month &&\r\n      this.state.activeChartTypeToggle === ToggleState.Right\r\n    ) {\r\n      this.setState({ isLineChartShown: true });\r\n    } else {\r\n      this.setState({ isBarChartShown: true });\r\n    }\r\n  };\r\n\r\n  hideBarChartModal = () => {\r\n    this.setState({ isBarChartShown: false });\r\n  };\r\n\r\n  hideLineChartModal = () => {\r\n    this.setState({ isLineChartShown: false });\r\n  };\r\n\r\n  render() {\r\n    const { t } = this.props;\r\n    const {\r\n      intervalType,\r\n      selectedYear,\r\n      selectedMonthIndex,\r\n      activeChartTypeToggle,\r\n      sumChecked,\r\n      isBarChartShown,\r\n      isButtonDisabled,\r\n      isLineChartShown,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"chart-container\">\r\n        <div className=\"cost-label\">{t('CHART.INTERVAL_TYPE')}</div>\r\n        <div className=\"button-group\">\r\n          <Button\r\n            className={classNames('button-group-item month col-xs-4', {\r\n              active: intervalType === IntervalType.Month,\r\n            })}\r\n            onClick={() => this.onRadioButtonClick(IntervalType.Month)}\r\n          >\r\n            {t('CHART.MONTHLY')}\r\n          </Button>\r\n          <Button\r\n            className={classNames('button-group-item year col-xs-4', {\r\n              active: intervalType === IntervalType.Year,\r\n            })}\r\n            onClick={() => this.onRadioButtonClick(IntervalType.Year)}\r\n          >\r\n            {t('CHART.YEARLY')}\r\n          </Button>\r\n          <Button\r\n            className={classNames('button-group-item full col-xs-4', {\r\n              active: intervalType === IntervalType.Full,\r\n            })}\r\n            onClick={() => this.onRadioButtonClick(IntervalType.Full)}\r\n          >\r\n            {t('CHART.FULL')}\r\n          </Button>\r\n        </div>\r\n        <div\r\n          className={classNames('interval-container', {\r\n            row: intervalType === IntervalType.Month,\r\n          })}\r\n        >\r\n          {intervalType !== IntervalType.Full && (\r\n            <div\r\n              className={classNames('dropdown-container year', {\r\n                'col-xs-12 col-sm-6 w_50': intervalType === IntervalType.Month,\r\n              })}\r\n            >\r\n              <div className=\"year\">\r\n                <div className=\"cost-label\">{t('CHART.YEAR')}</div>\r\n                <DropdownButton title={selectedYear} id=\"year-dropdown\">\r\n                  {getYearItems(this.onSelectYear)}\r\n                </DropdownButton>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {intervalType === IntervalType.Month && (\r\n            <div className={'dropdown-container month col-xs-12 col-sm-6'}>\r\n              <div className=\"month\">\r\n                <div className=\"cost-label\">{t('CHART.MONTH')}</div>\r\n                <DropdownButton\r\n                  title={Months[selectedMonthIndex]}\r\n                  id=\"month-dropdown\"\r\n                >\r\n                  {getMonths(this.onSelectMonth, selectedYear)}\r\n                </DropdownButton>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {intervalType !== IntervalType.Month && (\r\n            <div\r\n              className={`dropdown-container type ${\r\n                intervalType === 'year' ? 'col-xs-6' : 'col-xs-12 full-sized'\r\n              }`}\r\n            >\r\n              <div className=\"chart-type\">\r\n                <div className=\"cost-label\">{t('CHART.CHART_TYPE')}</div>\r\n                <ToggleButton\r\n                  active={activeChartTypeToggle}\r\n                  onClick={this.switchChartType}\r\n                  leftText={t('CHART.AMOUNT')}\r\n                  rightText={t('CHART.TREND')}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n          <div style={{ clear: 'both' }} />\r\n        </div>\r\n        <div className=\"category-container\">\r\n          <div className=\"cost-label\">{t('CHART.CATEGORIES')}</div>\r\n          <div className=\"checkbox-container row no-gutters\">\r\n            {this.getCheckboxes()}\r\n          </div>\r\n          <div style={{ clear: 'both' }} />\r\n        </div>\r\n        <div className=\"button-container\">\r\n          <Button\r\n            className=\"btn\"\r\n            onClick={this.getChartData}\r\n            disabled={isButtonDisabled}\r\n          >\r\n            {t('COMMON.OK')}\r\n          </Button>\r\n        </div>\r\n        <BarChartModal\r\n          shown={isBarChartShown}\r\n          title={t('CHART.BAR_CHART_SUM_BY_CATEGORIES')}\r\n          onClose={this.hideBarChartModal}\r\n          numberOfBars={this.getNumberOfCheckedCategories()}\r\n        />\r\n        <LineChartModal\r\n          shown={isLineChartShown}\r\n          title={t('CHART.LINE_CHART_SUM_BY_CATEGORIES')}\r\n          onClose={this.hideLineChartModal}\r\n          isSum={sumChecked}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  getChartData,\r\n};\r\n\r\nconst connector = connect(null, mapDispatchToProps);\r\n\r\nexport default compose(connector)(withTranslation()(Charts));\r\n","import React, { Component } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { compose } from 'redux';\r\nimport { WithTranslation, withTranslation } from 'react-i18next';\r\nimport {\r\n  curveMonotoneX,\r\n  line as d3line,\r\n  select,\r\n  selectAll,\r\n  easeLinear,\r\n  interpolateString,\r\n} from 'd3';\r\nimport { scaleBand, scaleLinear } from 'd3-scale';\r\nimport { axisBottom, axisLeft } from 'd3-axis';\r\n\r\nimport {\r\n  getMaxTextWidth,\r\n  getMoneyString,\r\n  getMonthLabel,\r\n  getTextWidth,\r\n} from 'utils/util';\r\nimport { Colors, LineChartAnimationLength, LineColors } from 'common/Constants';\r\nimport { ChartKey, MappedDataPoint } from 'models/chart.model';\r\nimport './LineChart.scss';\r\n\r\nexport interface LineChartProps\r\n  extends WithTranslation,\r\n    ConnectedProps<typeof connector> {\r\n  setSize: () => void;\r\n  isLarge: boolean;\r\n  isSum: boolean;\r\n}\r\n\r\nclass LineChart extends Component<LineChartProps> {\r\n  domNode = null;\r\n  height = 0;\r\n  width = 0;\r\n  legends: Array<string> = [];\r\n  labels: Array<string> = [];\r\n  selection: any;\r\n  tooltipWidth = 150;\r\n  tooltipHeight = 40;\r\n  margin = {\r\n    top: 60,\r\n    right: 20,\r\n    bottom: 30,\r\n    left: 80,\r\n  };\r\n  node: any;\r\n\r\n  componentDidMount() {\r\n    const { t, chart } = this.props;\r\n    for (let key in chart) {\r\n      if (\r\n        chart.hasOwnProperty(key) &&\r\n        key !== 'prevBalance' &&\r\n        chart[key as keyof typeof chart]\r\n      ) {\r\n        this.legends.push(t(`COMMON.CATEGORIES.${key}`));\r\n        if (!this.labels.length) {\r\n          (chart[key as keyof typeof chart] as MappedDataPoint[]).forEach(\r\n            (d: MappedDataPoint) => {\r\n              this.labels.push(getMonthLabel(d.year, d.month));\r\n            },\r\n          );\r\n        }\r\n      }\r\n    }\r\n    window.addEventListener('resize', this.resize);\r\n    this.draw();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.resize);\r\n  }\r\n\r\n  resize = () => {\r\n    this.props.setSize();\r\n    this.draw();\r\n  };\r\n\r\n  draw = () => {\r\n    const { chart, isSum, t } = this.props;\r\n    const svgSelection: any = select('svg');\r\n    if (\r\n      svgSelection._groups &&\r\n      svgSelection._groups[0] &&\r\n      svgSelection._groups[0][0]\r\n    ) {\r\n      select('svg').remove();\r\n    }\r\n    this.selection = select(this.node);\r\n    this.domNode = this.selection.node();\r\n    let isHorizontalLabels = false;\r\n    this.width =\r\n      parseInt(\r\n        window.getComputedStyle(\r\n          document.getElementsByClassName('modal-dialog')[0],\r\n        ).width,\r\n        10,\r\n      ) -\r\n      this.margin.left -\r\n      this.margin.right;\r\n    this.margin.bottom =\r\n      getMaxTextWidth(this.labels, 'normal 12px JmhTypewriter') + 10;\r\n    if (this.margin.bottom < this.width / this.labels.length) {\r\n      isHorizontalLabels = true;\r\n      this.margin.bottom = 30;\r\n    }\r\n    this.height =\r\n      (this.props.isLarge ? 500 : 300) - this.margin.top - this.margin.bottom;\r\n\r\n    const xScale = scaleBand().domain(this.labels).rangeRound([0, this.width]);\r\n\r\n    let minValue = 0;\r\n    let maxValue = 0;\r\n    for (let key in chart) {\r\n      if (\r\n        chart.hasOwnProperty(key) &&\r\n        key !== ChartKey.PrevBalance &&\r\n        chart[key as keyof typeof chart]\r\n      ) {\r\n        minValue = Math.min(\r\n          minValue,\r\n          ...(chart[key as keyof typeof chart] as MappedDataPoint[])?.map(\r\n            (d: MappedDataPoint) => {\r\n              return isSum && key === 'BALANCE' ? d.sumAmount || 0 : d.amount;\r\n            },\r\n          ),\r\n        );\r\n        maxValue = Math.max(\r\n          maxValue,\r\n          ...(chart[key as keyof typeof chart] as MappedDataPoint[]).map(\r\n            (d: MappedDataPoint) => {\r\n              return isSum && key === 'BALANCE' ? d.sumAmount || 0 : d.amount;\r\n            },\r\n          ),\r\n        );\r\n      }\r\n    }\r\n    const yScale = scaleLinear()\r\n      .domain([minValue, maxValue])\r\n      .rangeRound([this.height, 0]);\r\n\r\n    const mapX = (index: number) => {\r\n      return ((index + 0.5) * this.width) / this.labels.length;\r\n    };\r\n\r\n    const mapY = (value: number) => {\r\n      return (\r\n        this.height - (this.height * (value - minValue)) / (maxValue - minValue)\r\n      );\r\n    };\r\n\r\n    const svg = this.selection.append('svg').attr('class', 'line-chart');\r\n\r\n    // outer-g group is for legend\r\n    svg\r\n      .attr('width', this.width + this.margin.left + this.margin.right)\r\n      .attr('height', this.height + this.margin.top + this.margin.bottom)\r\n      .append('g')\r\n      .attr('class', 'outer-g');\r\n\r\n    // draw the legend\r\n    let shift = 0;\r\n    for (let key in chart) {\r\n      if (\r\n        chart.hasOwnProperty(key) &&\r\n        key !== 'prevBalance' &&\r\n        chart[key as keyof typeof chart]\r\n      ) {\r\n        select('.outer-g')\r\n          .append('circle')\r\n          .attr('class', 'legend-circle ' + key.toLowerCase())\r\n          .attr('stroke', this.getColor(key))\r\n          .attr('stroke-width', 3)\r\n          .attr('fill', Colors.lightGray)\r\n          .attr('r', 3)\r\n          .attr('transform', 'translate(' + shift + ', 30)');\r\n        shift += 10;\r\n        select('.outer-g')\r\n          .append('text')\r\n          .text(\r\n            t(`COMMON.CATEGORIES.${key}`) +\r\n              (isSum && key === 'BALANCE' ? ' (\\u03A3)' : ''),\r\n          )\r\n          .attr('transform', 'translate(' + shift + ', 34)')\r\n          .attr('class', 'legend-text')\r\n          .style('fill', this.getColor(key));\r\n        shift +=\r\n          getTextWidth(\r\n            t(`COMMON.CATEGORIES.${key}`),\r\n            'normal 12px VarelaRound',\r\n          ) + (isSum && key === 'BALANCE' ? 60 : 40);\r\n      }\r\n    }\r\n\r\n    // position legend group to center\r\n    select('.outer-g').attr(\r\n      'transform',\r\n      'translate(' +\r\n        (this.margin.left + (this.width - this.margin.right - shift) / 2) +\r\n        ', 0)',\r\n    );\r\n\r\n    // the main chart group\r\n    const g = svg\r\n      .append('g')\r\n      .attr('class', 'chart-g')\r\n      .attr(\r\n        'transform',\r\n        'translate(' + this.margin.left + ',' + this.margin.top + ')',\r\n      );\r\n\r\n    // draw axis X with labels\r\n    g.append('g')\r\n      .attr('class', 'axis axis--x')\r\n      .attr('transform', 'translate(0,' + this.height + ')')\r\n      .call(axisBottom(xScale))\r\n      .selectAll('text')\r\n      .style('text-anchor', 'end')\r\n      .style('fill', Colors.costBlue)\r\n      .style('stroke', 'none')\r\n      .attr('class', 'label-text')\r\n      .attr('dx', isHorizontalLabels ? 0 : '-.8em')\r\n      .attr('dy', isHorizontalLabels ? '.9em' : '-.55em');\r\n\r\n    // position x-labels in an intelligent way (rotate or shift)\r\n    selectAll('.label-text')\r\n      .nodes()\r\n      .forEach((node) =>\r\n        select(node).attr(\r\n          'transform',\r\n          isHorizontalLabels\r\n            ? 'translate(' +\r\n                (node as SVGTextContentElement).getComputedTextLength() / 2 +\r\n                ', 0)'\r\n            : 'rotate(-90)',\r\n        ),\r\n      );\r\n\r\n    // draw axis Y\r\n    g.append('g').attr('class', 'axis axis--y').call(axisLeft(yScale).ticks(5));\r\n\r\n    // line drawer function\r\n    const line = d3line()\r\n      .x((_, i: number) => mapX(i))\r\n      .y((d: any) => {\r\n        return isSum && d.sumAmount ? mapY(d.sumAmount) : mapY(d.amount);\r\n      })\r\n      .curve(curveMonotoneX);\r\n\r\n    // draw each line\r\n    for (let key in chart) {\r\n      if (\r\n        chart.hasOwnProperty(key) &&\r\n        chart[key as keyof typeof chart] &&\r\n        key !== 'prevBalance'\r\n      ) {\r\n        g.append('path')\r\n          .attr('class', 'line')\r\n          // @ts-ignore\r\n          .attr('d', () => {\r\n            // @ts-ignore\r\n            return line(chart[key as keyof typeof chart]);\r\n          })\r\n          .attr('stroke', this.getColor(key))\r\n          .attr('stroke-width', 3)\r\n          .attr('fill', 'none')\r\n          .call(this.transition);\r\n      }\r\n    }\r\n\r\n    // draw dots at each data point\r\n    for (let key in chart) {\r\n      if (chart.hasOwnProperty(key) && chart[key as keyof typeof chart]) {\r\n        setTimeout(() => {\r\n          const that = this;\r\n          const selection = g\r\n            .selectAll('.dot.' + key.toLowerCase())\r\n            // @ts-ignore\r\n            .data(this.props.chart[key])\r\n            .enter()\r\n            .append('circle');\r\n          selection\r\n            .on('mouseover', function (event: Event, d: MappedDataPoint) {\r\n              const nodes = selection.nodes();\r\n              // @ts-ignore\r\n              const i = nodes.indexOf(this);\r\n              that.onMouseOver(d, i, nodes);\r\n            })\r\n            .on('mouseout', function (event: Event, d: MappedDataPoint) {\r\n              const nodes = selection.nodes();\r\n              // @ts-ignore\r\n              const i = nodes.indexOf(this);\r\n              that.onMouseOut(d, i, nodes);\r\n            })\r\n            .attr('class', 'dot ' + key.toLowerCase())\r\n            .attr('cx', (_: any, i: number) => mapX(i))\r\n            .attr('cy', (d: MappedDataPoint) => {\r\n              if (key === 'BALANCE') {\r\n                return isSum ? mapY(d.sumAmount || 0) : mapY(d.amount);\r\n              }\r\n              return mapY(d.amount);\r\n            })\r\n            .attr('stroke', this.getColor(key))\r\n            .attr('stroke-width', 3)\r\n            .attr('fill', Colors.lightGray)\r\n            .attr('r', 3)\r\n            .style('opacity', 0)\r\n            .transition()\r\n            .duration(200)\r\n            .ease(easeLinear)\r\n            .style('opacity', 1);\r\n        }, LineChartAnimationLength - 100);\r\n      }\r\n    }\r\n\r\n    // the tooltip\r\n    setTimeout(() => {\r\n      select('.chart-g')\r\n        .append('rect')\r\n        .attr('width', this.tooltipWidth)\r\n        .attr('height', this.tooltipHeight)\r\n        .attr('class', 'cost-tooltip')\r\n        .attr('rx', 20)\r\n        .attr('ry', 20)\r\n        .style('fill', Colors.lightGray)\r\n        .style('opacity', 0.85)\r\n        .style('stroke-width', 3)\r\n        .style('display', 'none');\r\n      // the tooltip text\r\n      select('.chart-g')\r\n        .append('text')\r\n        .attr('class', 'tooltip-text')\r\n        .style('display', 'none');\r\n    }, LineChartAnimationLength + 500);\r\n  };\r\n\r\n  onMouseOver(d: MappedDataPoint, i: number, nodes: any) {\r\n    const circle = select(nodes[i]);\r\n    const tooltipText =\r\n      circle.classed('balance') && this.props.isSum\r\n        ? getMoneyString(d.sumAmount || 0)\r\n        : getMoneyString(d.amount);\r\n    circle.attr('r', 5);\r\n    const translateX = Math.min(\r\n      this.width - this.tooltipWidth + this.margin.right - 3,\r\n      ((circle.attr('cx') as unknown) as number) - this.tooltipWidth / 2,\r\n    );\r\n    select('.cost-tooltip')\r\n      .attr(\r\n        'transform',\r\n        'translate(' +\r\n          translateX +\r\n          ', ' +\r\n          (((circle.attr('cy') as unknown) as number) -\r\n            this.tooltipHeight -\r\n            5) +\r\n          ')',\r\n      )\r\n      .style('stroke', circle.attr('stroke'))\r\n      .style('display', 'block');\r\n    select('.tooltip-text')\r\n      .text(tooltipText)\r\n      .attr(\r\n        'transform',\r\n        'translate(' +\r\n          (translateX +\r\n            (this.tooltipWidth -\r\n              getTextWidth(tooltipText, 'normal 16px VarelaRound')) /\r\n              2) +\r\n          ', ' +\r\n          (((circle.attr('cy') as unknown) as number) -\r\n            this.tooltipHeight / 2 +\r\n            2) +\r\n          ')',\r\n      )\r\n      .attr('fill', circle.attr('stroke'))\r\n      .style('display', 'block');\r\n  }\r\n\r\n  onMouseOut = (d: MappedDataPoint, i: number, nodes: any) => {\r\n    select(nodes[i]).attr('r', 3);\r\n    select('.cost-tooltip').style('display', 'none');\r\n    select('.tooltip-text').style('display', 'none');\r\n  };\r\n\r\n  transition = (path: any) => {\r\n    path\r\n      .transition()\r\n      .duration(LineChartAnimationLength)\r\n      .attrTween('stroke-dasharray', this.tweenDash);\r\n  };\r\n\r\n  tweenDash() {\r\n    const l = (this as any).getTotalLength(),\r\n      i = interpolateString('0,' + l, l + ',' + l);\r\n    // @ts-ignore\r\n    return (t) => i(t);\r\n  }\r\n\r\n  // @ts-ignore\r\n  getColor = (key) =>\r\n    key === 'BALANCE'\r\n      ? Colors.costBlue\r\n      : key === 'COST'\r\n      ? Colors.costRed\r\n      : key === 'INCOME'\r\n      ? Colors.costGreen\r\n      : LineColors[\r\n          this.legends.indexOf(this.props.t(`COMMON.CATEGORIES.${key}`)) %\r\n            LineColors.length\r\n        ];\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"line-chart-container\" ref={(r) => (this.node = r)} />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: ApplicationState) => {\r\n  return {\r\n    chart: state.chart,\r\n  };\r\n};\r\n\r\nconst connector = connect(mapStateToProps, {});\r\n\r\nexport default compose(connector)(withTranslation()(LineChart));\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport LineChart from './LineChart';\r\nimport { Dialog, DialogProps } from 'components/dialog/Dialog';\r\n\r\nexport interface LineChartModalProps extends DialogProps {\r\n  isSum: boolean;\r\n}\r\n\r\nexport const LineChartModal: FC<LineChartModalProps> = ({\r\n  isSum,\r\n  shown,\r\n  onClose,\r\n  title,\r\n}) => {\r\n  const [isLarge, setLarge] = useState<boolean>(window.innerWidth >= 992);\r\n\r\n  const handleResize = () => {\r\n    setLarge(window.innerWidth >= 992);\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('resize', handleResize);\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Dialog\r\n      shown={shown}\r\n      title={title}\r\n      className={classNames('line-chart-modal', { small: !isLarge })}\r\n      onClose={onClose}\r\n    >\r\n      <LineChart isLarge={isLarge} setSize={handleResize} isSum={isSum} />\r\n    </Dialog>\r\n  );\r\n};\r\n","import React, { FC, useEffect } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport classNames from 'classnames';\r\n\r\nimport { NotificationType } from 'models/common.model';\r\nimport { hideNotification } from 'store/common';\r\nimport { compose } from \"utils/compose\";\r\nimport './Notification.scss';\r\n\r\ninterface NotificationProps extends ConnectedProps<typeof connector> {}\r\n\r\nexport const Notification: FC<NotificationProps> = (props) => {\r\n  useEffect(() => {\r\n    setTimeout(hideNotification, 2000);\r\n  }, []);\r\n\r\n  const {notification, hideNotification} = props;\r\n\r\n  return (\r\n    <div\r\n      className={classNames('bubble', {\r\n        error: notification?.type === NotificationType.Error\r\n      })}\r\n      onClick={hideNotification}\r\n    >\r\n      <div\r\n        className={classNames('inner', {\r\n          error: notification?.type === NotificationType.Error,\r\n        })}\r\n      >\r\n        {notification?.text}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: ApplicationState) => {\r\n  return {\r\n    notification: state.common.notification,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  hideNotification,\r\n};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport default compose(connector)(Notification);\r\n","import React, { Component } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { Redirect, Route, Switch } from 'react-router';\r\n\r\nimport Header from 'components/header/Header';\r\nimport Login from 'pages/login/Login';\r\nimport Dashboard from 'pages/dashboard/Dashboard';\r\nimport Stats from 'pages/stats/Stats';\r\nimport Query from 'pages/query/Query';\r\nimport Charts from 'pages/chart/Charts';\r\nimport Notification from 'components/notification/Notification';\r\nimport { compose } from 'utils/compose';\r\nimport './App.scss';\r\n\r\ninterface AppProps extends ConnectedProps<typeof connector> {}\r\n\r\nclass App extends Component<AppProps> {\r\n  render() {\r\n    const { token, notification } = this.props;\r\n    return (\r\n      <div className=\"cost\">\r\n        <>\r\n          <Header authenticated={!!token} />\r\n          {!!token ? (\r\n            <Switch>\r\n              <Route exact path={'/cost'} component={Dashboard} />\r\n              <Route exact path={'/stats'} component={Stats} />\r\n              <Route exact path={'/query'} component={Query} />\r\n              <Route exact path=\"/chart\" component={Charts} />\r\n              <Redirect to={'/cost'} />\r\n            </Switch>\r\n          ) : (\r\n            <Switch>\r\n              <Route exact path={'/login'} component={Login} />\r\n              <Redirect to={'/login'} />\r\n            </Switch>\r\n          )}\r\n          {!!notification ? <Notification /> : null}\r\n        </>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: ApplicationState) => {\r\n  return {\r\n    token: state.auth.token,\r\n    notification: state.common.notification,\r\n  };\r\n};\r\n\r\nconst connector = connect(mapStateToProps, {});\r\n\r\nexport default compose(connector)(App);\r\n","import React, { Suspense } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { Router } from 'react-router-dom';\r\nimport i18n from 'i18n';\r\nimport { I18nextProvider } from 'react-i18next';\r\nimport { createBrowserHistory } from 'history';\r\n\r\nimport * as serviceWorker from './serviceWorker';\r\nimport store from 'store';\r\nimport App from 'pages/app/App';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport './index.scss';\r\n\r\nconst history = createBrowserHistory();\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <Suspense fallback=\" \">\r\n        <I18nextProvider i18n={i18n}>\r\n          <Router history={history}>\r\n            <App />\r\n          </Router>\r\n        </I18nextProvider>\r\n      </Suspense>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}